/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@tensorflow/tfjs-core"),require("path"),require("fs"),require("worker_threads"),require("perf_hooks"),require("os")):"function"==typeof define&&define.amd?define(["exports","@tensorflow/tfjs-core","path","fs","worker_threads","perf_hooks","os"],n):n(((e=e||self).tf=e.tf||{},e.tf.wasm=e.tf.wasm||{}),e.tf,e.path,e.fs,e.worker_threads,e.perf_hooks,e.os)}(this,(function(e,n,t,a,r,u,s){"use strict";var i,o,d;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(i||(i={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(o||(o={}));var l={kernelName:n._FusedMatMul,backendName:"wasm",setupFunc:function(e){d=e.wasm.cwrap(n._FusedMatMul,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.a,u=n.b,s=n.bias,i=n.preluActivationWeights;if("float32"!==r.dtype||"float32"!==u.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var l=a.transposeA,c=a.transposeB,p=a.activation,f=a.leakyreluAlpha,m=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(u.dataId).id,b=0;if(null!=s){var y=t.dataIdMap.get(s.dataId);if(1!==y.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank "+y.shape.length+".");b=y.id}var _=null==i?0:t.dataIdMap.get(i.dataId).id,v=o[p];if(null==v)throw new Error(p+" activation not yet supported for FusedConv2D in the wasm backend.");var g=l?r.shape[2]:r.shape[1],w=c?u.shape[1]:u.shape[2],k=r.shape[0],I=t.makeOutput([k,g,w],r.dtype),S=t.dataIdMap.get(I.dataId).id,A=new Uint8Array(new Int32Array(r.shape).buffer),M=new Uint8Array(new Int32Array(u.shape).buffer);return d(m,A,r.shape.length,h,M,u.shape.length,l,c,v,b,_,f||0,S),I}};function c(e,t){var a;return{kernelName:e,backendName:"wasm",setupFunc:function(n){a=n.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,u=e.inputs.x,s=r.dataIdMap.get(u.dataId).id,o=r.makeOutput(u.shape,t||u.dtype),d=r.dataIdMap.get(o.dataId).id;return 0===n.util.sizeFromShape(o.shape)||a(s,i[u.dtype],d),o}}}var p=c(n.Abs);function f(e,t,a){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(n){r=n.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(u){var s=u.backend,o=u.inputs,d=o.a,l=o.b,c=s.dataIdMap.get(d.dataId).id,p=s.dataIdMap.get(l.dataId).id,f=null!=a?a:d.dtype,m=n.backend_util.assertAndGetBroadcastShape(d.shape,l.shape),h=s.makeOutput(m,f);if(0===n.util.sizeFromShape(m))return h;var b=new Uint8Array(new Int32Array(d.shape).buffer),y=new Uint8Array(new Int32Array(l.shape).buffer),_=s.dataIdMap.get(h.dataId).id,v=function(){return r(c,b,d.shape.length,p,y,l.shape.length,i[d.dtype],_)};if(t&&"float32"===d.dtype)return v(),h;var g=n.backend_util.getBroadcastDims(d.shape,m),w=n.backend_util.getBroadcastDims(l.shape,m),k=g.every((function(e,n){return e===n})),I=w.every((function(e,n){return e===n}));if(k&&I)return v(),h;throw new Error("Broadcasting along outer dims is not yet supported for "+d.dtype+" "+e+".")}}}var m,h=f(n.Add,!0);var b={kernelName:n.AddN,backendName:"wasm",setupFunc:function(e){m=e.wasm.cwrap(n.AddN,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.backend,r=a.makeOutput(t[0].shape,t[0].dtype);if(0===n.util.sizeFromShape(r.shape))return r;var u=t.map((function(e){return a.dataIdMap.get(e.dataId).id})),s=new Uint8Array(new Int32Array(u).buffer),o=a.dataIdMap.get(r.dataId).id;return m(s,u.length,i[r.dtype],o),r}};function y(e){var n=e.inputs.x,t=e.backend,a=t.makeOutput(n.shape,n.dtype),r=t.typedArrayFromHeap(n);return t.typedArrayFromHeap(a).set(r),a}var _,v={kernelName:n.Identity,backendName:"wasm",kernelFunc:y};function g(e){for(var n=e.inputs,t=e.backend,a=e.attrs,r=function(e,n){for(var t=[],a=[],r=0;r<e.length;++r)1!==e[r]&&t.push(e[r]),1!==e[n[r]]&&a.push(n[r]);for(r=0;r<a.length;++r){for(var u=-1,s=0;s<a.length;++s)a[s]>=r&&(-1===u||a[u]>a[s])&&(u=s);a[u]=r}return[t,a]}(n.x.shape,a.perm),u=r[0],s=r[1],o=!0,d=0;d<s.length;d++)s[d]!==d&&(o=!1);var l=function(e,n){for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=e[n[a]];return t}(n.x.shape,a.perm),c={dataId:n.x.dataId,shape:u,dtype:n.x.dtype};if(o){var p=y({inputs:n,backend:t});return p.shape=l,p}var f=t.makeOutput(l,c.dtype),m=t.dataIdMap.get(c.dataId).id,h=t.dataIdMap.get(f.dataId).id,b=new Uint8Array(new Int32Array(s).buffer),v=new Uint8Array(new Int32Array(c.shape).buffer);return _(m,v,c.shape.length,i[c.dtype],h,b,s.length),f}var w,k={kernelName:n.Transpose,backendName:"wasm",kernelFunc:g,setupFunc:function(e){_=e.wasm.cwrap(n.Transpose,null,["number","array","number","number","number","array","number"])}};function I(e,t,a){var r=e.shape,u=e.shape.length,s=n.util.parseAxisParam(t,r),i=s,o=n.backend_util.getAxesPermutation(i,u),d=null,l=!1;if(null!=o){for(var c=new Array(u),p=0;p<c.length;p++)c[p]=r[o[p]];i=n.backend_util.getInnerMostAxes(i.length,u),d=g({inputs:{x:e},attrs:{perm:o},backend:a});var f=a.dataIdMap.get(e.dataId).id;a.dataIdMap.get(d.dataId).id!==f&&(l=!0)}return{transposed:d,originalAxes:s,axes:i,inputWasTransposed:l}}var S,A={kernelName:n.All,backendName:"wasm",setupFunc:function(e){w=e.wasm.cwrap(n.All,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.axis,s=r.keepDims,i=a.x,o=t.dataIdMap.get(i.dataId).id,d=i,l=I(i,u,t),c=l.transposed,p=l.axes,f=l.originalAxes,m=l.inputWasTransposed;m&&(d=c,o=t.dataIdMap.get(c.dataId).id);var h=d.shape.length;n.backend_util.assertAxesAreInnerMostDims("all",p,h);var b=n.backend_util.computeOutAndReduceShapes(d.shape,p),y=b[0],_=b[1],v=n.util.sizeFromShape(_),g=t.makeOutput(y,i.dtype);if(0!==n.util.sizeFromShape(d.shape)){var k=t.dataIdMap.get(g.dataId).id;w(o,v,k)}if(m&&t.disposeData(c.dataId),s){var S=n.backend_util.expandShapeToKeepDim(g.shape,f);g.shape=S}return g}};var M,E={kernelName:n.Any,backendName:"wasm",setupFunc:function(e){S=e.wasm.cwrap(n.Any,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.axis,s=r.keepDims,i=a.x,o=t.dataIdMap.get(i.dataId).id,d=i,l=I(i,u,t),c=l.transposed,p=l.axes,f=l.originalAxes,m=l.inputWasTransposed;m&&(d=c,o=t.dataIdMap.get(c.dataId).id);var h=d.shape.length;n.backend_util.assertAxesAreInnerMostDims("any",p,h);var b=n.backend_util.computeOutAndReduceShapes(d.shape,p),y=b[0],_=b[1],v=n.util.sizeFromShape(_),g=t.makeOutput(y,i.dtype);if(0!==n.util.sizeFromShape(d.shape)){var w=t.dataIdMap.get(g.dataId).id;S(o,v,w)}if(m&&t.disposeData(c.dataId),s){var k=n.backend_util.expandShapeToKeepDim(g.shape,f);g.shape=k}return g}};var x,N={kernelName:n.ArgMax,backendName:"wasm",kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs.axis,u=a.x,s=t.dataIdMap.get(u.dataId).id,o=s,d=u,l=I(u,r,t),c=l.transposed,p=l.axes,f=l.inputWasTransposed;if(f){var m=t.dataIdMap.get(c.dataId).id;m!==s&&(d=c,o=m)}var h=d.shape.slice(0,-1),b=t.makeOutput(h,"int32"),y=t.dataIdMap.get(b.dataId).id,_=n.util.sizeFromShape(b.shape),v=d.shape[p[0]];return M(o,i[d.dtype],_,v,y),f&&t.disposeData(c.dataId),b},setupFunc:function(e){M=e.wasm.cwrap(n.ArgMax,null,["number","number","number","number","number"])}};var F={kernelName:n.AvgPool,backendName:"wasm",setupFunc:function(e){x=e.wasm.cwrap(n.AvgPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=r.dataIdMap.get(u.dataId).id,i=a.filterSize,o=a.strides,d=a.pad,l=a.dimRoundingMode,c=n.backend_util.computePool2DInfo(u.shape,i,o,1,d,l),p=c.filterHeight,f=c.filterWidth,m=c.padInfo.top,h=c.padInfo.right,b=c.padInfo.bottom,y=c.padInfo.left,_=c.strideHeight,v=c.strideWidth,g=c.inChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+c.dataFormat+"'. Please use 'channelsLast'.");if(1!==c.dilationWidth||1!==c.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got ["+c.dilationHeight+", "+c.dilationWidth+"].");var w=r.makeOutput(c.outShape,"float32"),k=r.dataIdMap.get(w.dataId).id;return x(s,u.shape[0],u.shape[1],u.shape[2],p,f,m,h,b,y,_,v,g,k),w}};function T(e){var t=e.inputs,a=e.attrs,r=t.x,u=a.shape,s=n.util.sizeFromShape(r.shape),i=n.util.inferFromImplicitShape(u,s);return n.util.assert(s===n.util.sizeFromShape(i),(function(){return"new shape: "+i+", old shape: "+r.shape+". New shape and old shape must have the same number of elements."})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var O,C={kernelName:n.Reshape,backendName:"wasm",kernelFunc:T};var D={kernelName:n.BatchMatMul,backendName:"wasm",setupFunc:function(e){O=e.wasm.cwrap(n.BatchMatMul,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,u=t.a,s=t.b,i=r.transposeA,o=r.transposeB;if("float32"!==u.dtype||"float32"!==s.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var d=u.shape.length,l=s.shape.length,c=i?u.shape[d-2]:u.shape[d-1],p=o?s.shape[l-1]:s.shape[l-2],f=i?u.shape[d-1]:u.shape[d-2],m=o?s.shape[l-2]:s.shape[l-1],h=u.shape.slice(0,-2),b=s.shape.slice(0,-2),y=n.util.sizeFromShape(h),_=n.util.sizeFromShape(b),v=y===_||1===y||1===_;n.util.assert(d>=2&&l>=2&&v,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of ("+h+") and ("+b+")."}));var g=(y>_?u.shape.slice(0,-2):s.shape.slice(0,-2)).concat([f,m]);n.util.assert(c===p,(function(){return"Error in matMul: inner shapes ("+c+") and ("+p+") of Tensors with shapes "+u.shape+" and "+s.shape+" and transposeA="+i+" and transposeB="+o+" must match."}));var w=o?[_,m,p]:[_,p,m],k=T({inputs:{x:u},backend:a,attrs:{shape:i?[y,c,f]:[y,f,c]}}),I=T({inputs:{x:s},backend:a,attrs:{shape:w}}),S=a.dataIdMap.get(k.dataId).id,A=a.dataIdMap.get(I.dataId).id,M=i?k.shape[2]:k.shape[1],E=o?I.shape[1]:I.shape[2],x=Math.max(y,_),N=a.makeOutput([x,M,E],k.dtype),F=a.dataIdMap.get(N.dataId).id,C=new Uint8Array(new Int32Array(k.shape).buffer),D=new Uint8Array(new Int32Array(I.shape).buffer);return O(S,C,k.shape.length,A,D,I.shape.length,i,o,F),a.disposeData(k.dataId),a.disposeData(I.dataId),N.shape=g,N}};function R(e,t,a,r,u){const s=n.slice_util.isSliceContinous(r,t,a),i=n.util.sizeFromShape(a),o=n.util.computeStrides(r);if(s){const a=n.slice_util.computeFlatOffset(t,o);return"string"===u?e.slice(a,a+i):e.subarray(a,a+i)}const d="string"===u?n.backend_util.fromUint8ToStringArray(e):e,l=n.buffer(r,u,d),c=n.buffer(a,u);for(let e=0;e<c.size;++e){const n=c.indexToLoc(e),a=n.map(((e,n)=>e+t[n]));c.set(l.get(...a),...n)}return"string"===u?n.backend_util.fromStringArrayToUint8(c.values):c.values}function P(e){var t=e.inputs.x,a=e.attrs,r=a.begin,u=a.size,s=e.backend,i=n.slice_util.parseSliceParams(t,r,u),o=i[0],d=i[1],l=n.slice_util.isSliceContinous(t.shape,o,d),c=s.readSync(t.dataId),p=s.makeOutput(d,t.dtype),f=n.util.computeStrides(t.shape),m=s.dataIdMap.get(p.dataId);if(l){var h=n.slice_util.computeFlatOffset(o,f);if("string"===t.dtype)m.stringBytes=c.slice(h,h+n.util.sizeFromShape(d));else s.typedArrayFromHeap(p).set(c.subarray(h,h+n.util.sizeFromShape(d)));return p}if("string"===t.dtype){var b=R(c,o,d,t.shape,t.dtype);return m.stringBytes=b,p}var y=s.typedArrayFromHeap(p),_=t.shape.length;if(2===_)!function(e,n,t,a,r){for(var u=0,s=a[0],i=a[1],o=s+r[0],d=s;d<o;d++){var l=d*n+i;t.set(e.subarray(l,l+r[1]),u),u+=r[1]}}(c,f[0],y,o,d);else if(3===_)!function(e,n,t,a,r,u){for(var s=0,i=r[0],o=r[1],d=r[2],l=i+u[0],c=o+u[1],p=i;p<l;p++)for(var f=o;f<c;f++){var m=p*n+f*t+d;a.set(e.subarray(m,m+u[2]),s),s+=u[2]}}(c,f[0],f[1],y,o,d);else if(4===_)!function(e,n,t,a,r,u,s){for(var i=0,o=u[0],d=u[1],l=u[2],c=o+s[0],p=d+s[1],f=l+s[2],m=u[3],h=o;h<c;h++)for(var b=d;b<p;b++)for(var y=l;y<f;y++){var _=h*n+b*t+y*a+m;r.set(e.subarray(_,_+s[3]),i),i+=s[3]}}(c,f[0],f[1],f[2],y,o,d);else{b=R(c,o,d,t.shape,t.dtype);y.set(b)}return p}var W={kernelName:n.Slice,backendName:"wasm",kernelFunc:P};var L={kernelName:n.BatchToSpaceND,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,u=t.x,s=r.blockShape,i=r.crops,o=s.reduce((function(e,n){return e*n})),d=n.backend_util.getReshaped(u.shape,s,o),l=n.backend_util.getPermuted(d.length,s.length),c=n.backend_util.getReshapedPermuted(u.shape,s,o),p=n.backend_util.getSliceBeginCoords(i,s.length),f=n.backend_util.getSliceSize(c,i,s.length),m=T({inputs:{x:u},backend:a,attrs:{shape:d}}),h=g({inputs:{x:m},backend:a,attrs:{perm:l}}),b=P({inputs:{x:T({inputs:{x:h},backend:a,attrs:{shape:c}})},backend:a,attrs:{begin:p,size:f}});return a.disposeData(m.dataId),a.disposeData(h.dataId),a.disposeData(m.dataId),b}};function H(e){var n=e.inputs.x,t=e.attrs.dtype,a=e.backend,r=a.makeOutput(n.shape,t),u=a.typedArrayFromHeap(n);return a.typedArrayFromHeap(r).set(u),r}var B,U={kernelName:n.Cast,backendName:"wasm",kernelFunc:H},z=c(n.Ceil);var j={kernelName:n.ClipByValue,backendName:"wasm",setupFunc:function(e){B=e.wasm.cwrap(n.ClipByValue,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,u=a.clipValueMin,s=a.clipValueMax,i=t.dataIdMap.get(r.dataId).id,o=t.makeOutput(r.shape,r.dtype),d=t.dataIdMap.get(o.dataId).id;return B(i,u,s,d),o}};function q(e){var t=e.inputs,a=e.backend,r=n.util.parseAxisParam(e.attrs.axis,t[0].shape)[0],u=n.backend_util.computeOutShape(t.map((function(e){return e.shape})),r),s=t.filter((function(e){return n.util.sizeFromShape(e.shape)>0}));if(1===s.length)return y({inputs:{x:s[0]},backend:a});var i=a.makeOutput(u,t[0].dtype);if(0===n.util.sizeFromShape(u))return i;var o=s.map((function(e){return e.shape}));if(n.backend_util.assertParamsConsistent(o,r),"string"===s[0].dtype){var d=s.map((function(e){var t=n.util.sizeFromShape(e.shape.slice(r));return T({inputs:{x:e},backend:a,attrs:{shape:[-1,t]}})})),l=d.map((function(e){return{vals:a.readSync(e.dataId),shape:e.shape}}));u=n.backend_util.computeOutShape(d.map((function(e){return e.shape})),1);var c=1===d[0].shape[0],p=function(e,t,a,r){const u=n.util.getArrayFromDType(a,n.util.sizeFromShape(t));if(r&&"string"!==a){let t=0;e.forEach((e=>{const a=n.util.sizeFromShape(e.shape);u.set(e.vals,t),t+=a}))}else{let r=0;e.forEach((e=>{const s="string"===a?n.backend_util.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const a=n*t[1]+r;for(let n=0;n<e.shape[1];++n)u[a+n]=s[i++]}r+=e.shape[1]}))}return u}(l,u,t[0].dtype,c),f=n.backend_util.computeOutShape(s.map((function(e){return e.shape})),r);return i.shape=f,a.dataIdMap.get(i.dataId).stringBytes=n.backend_util.fromStringArrayToUint8(p),d.forEach((function(e){return a.disposeData(e.dataId)})),i}for(var m=n.util.sizeFromShape(s[0].shape.slice(0,r)),h=0,b=s.map((function(e){var t=n.util.sizeFromShape(e.shape.slice(r));return h+=t,t})),_=s.map((function(e){return a.typedArrayFromHeap(e)})),v=a.typedArrayFromHeap(i),g=0;g<m;g++)for(var w=g*h,k=0;k<_.length;k++){var I=b[k],S=g*I,A=_[k].subarray(S,S+I);v.set(A,w),w+=I}return i}var V,G={kernelName:n.Concat,backendName:"wasm",kernelFunc:q};var K,X={kernelName:n.Conv2D,backendName:"wasm",setupFunc:function(e){V=e.wasm.cwrap(n.Conv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=t.filter,i=r.dataIdMap.get(u.dataId).id,o=r.dataIdMap.get(s.dataId).id,d=a.strides,l=a.dilations,c=a.pad,p=a.dimRoundingMode,f=a.dataFormat,m=n.backend_util.convertConv2DDataFormat(f),h=n.backend_util.computeConv2DInfo(u.shape,s.shape,d,l,c,p,!1,m),b=h.filterHeight,y=h.filterWidth,_=h.padInfo.top,v=h.padInfo.right,g=h.padInfo.bottom,w=h.padInfo.left,k=h.dilationHeight,I=h.dilationWidth,S=h.strideHeight,A=h.strideWidth,M=h.inChannels,E=h.outChannels,x="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+h.dataFormat+"'. Please use 'channelsLast'.");var N=r.makeOutput(h.outShape,"float32"),F=r.dataIdMap.get(N.dataId).id;return V(i,u.shape[0],u.shape[1],u.shape[2],o,b,y,_,v,g,w,x,k,I,S,A,M,E,F),N}};var Q,Y,Z={kernelName:n.Conv2DBackpropInput,backendName:"wasm",setupFunc:function(e){K=e.wasm.cwrap(n.Conv2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=a.dy,s=a.filter,i=r.strides,o=r.pad,d=r.dataFormat,l=r.dimRoundingMode,c=r.inputShape,p=n.backend_util.convertConv2DDataFormat(d),f=n.backend_util.computeConv2DInfo(c,s.shape,i,1,o,l,!1,p),m=f.batchSize,h=f.filterHeight,b=f.filterWidth,y=f.inChannels,_=f.inHeight,v=f.inWidth,g=f.outChannels,w=f.outHeight,k=f.outWidth,I=f.strideHeight,S=f.strideWidth,A=h-1-f.padInfo.top,M=b-1-f.padInfo.left,E="channelsLast"===f.dataFormat,x=n.util.computeStrides(f.inShape),N=n.util.computeStrides(u.shape),F=n.util.computeStrides(s.shape),T=F[0],O=F[1],C=F[2],D=x[0],R=E?x[1]:x[2],P=E?x[2]:1,W=E?1:x[1],L=N[0],H=E?N[1]:N[2],B=E?N[2]:1,U=E?1:N[1],z=t.makeOutput(f.inShape,"float32"),j=t.dataIdMap.get(z.dataId).id,q=t.dataIdMap.get(u.dataId).id,V=t.dataIdMap.get(s.dataId).id;return K(q,V,m,h,b,_,v,y,w,k,g,I,S,A,M,T,O,C,D,R,P,W,L,H,B,U,j),z}},J=c(n.Cos),$=c(n.Cosh);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(Q||(Q={}));var ee,ne={kernelName:n.CropAndResize,backendName:"wasm",setupFunc:function(e){Y=e.wasm.cwrap(n.CropAndResize,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var n,t=e.backend,a=e.inputs,r=e.attrs,u=r.method,s=r.extrapolationValue,i=r.cropSize,o=a.image,d=a.boxes,l=a.boxInd,c=d.shape[0],p=i,f=p[0],m=p[1],h=[c,f,m,o.shape[3]],b=t.dataIdMap.get(o.dataId);"float32"!==o.dtype&&(n=H({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),b=t.dataIdMap.get(n.dataId));var y=b.id,_=t.dataIdMap.get(d.dataId).id,v=t.dataIdMap.get(l.dataId).id,g=t.makeOutput(h,"float32"),w=t.dataIdMap.get(g.dataId).id,k=new Uint8Array(new Int32Array(o.shape).buffer);return Y(y,_,v,c,k,f,m,Q[u],s,w),null!=n&&t.disposeData(n.dataId),g}};var te,ae={kernelName:n.Cumsum,backendName:"wasm",setupFunc:function(e){ee=e.wasm.cwrap(n.Cumsum,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,u=t.x,s=r.axis,o=r.exclusive,d=r.reverse,l=u.shape.length;n.util.assert("float32"===u.dtype||"int32"===u.dtype,(function(){return"cumsum does not support "+u.dtype+" tensors in the WASM backend"}));var c=n.backend_util.getAxesPermutation([s],l),p=u;null!==c&&(p=g({inputs:{x:u},attrs:{perm:c},backend:a}));var f=n.backend_util.getInnerMostAxes(1,l)[0];n.backend_util.assertAxesAreInnerMostDims("cumsum",[f],l);var m=a.makeOutput(p.shape,p.dtype),h=p.shape[f],b=a.dataIdMap.get(p.dataId).id,y=a.dataIdMap.get(m.dataId).id;ee(b,o?1:0,d?1:0,h,y,i[u.dtype]);var _=m;return null!==c&&(_=g({inputs:{x:m},attrs:{perm:n.backend_util.getUndoAxesPermutation(c)},backend:a}),a.disposeData(p.dataId),a.disposeData(m.dataId)),_}};var re,ue={kernelName:n.DepthToSpace,backendName:"wasm",setupFunc:function(e){te=e.wasm.cwrap(n.DepthToSpace,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=a.x,s=r.blockSize,i=r.dataFormat,o=u.shape[0],d=("NHWC"===i?u.shape[1]:u.shape[2])*s,l=("NHWC"===i?u.shape[2]:u.shape[3])*s,c=("NHWC"===i?u.shape[3]:u.shape[1])/(s*s),p="NHWC"===i?[o,d,l,c]:[o,c,d,l],f=t.makeOutput(p,"float32"),m=t.dataIdMap.get(u.dataId).id,h=new Uint8Array(new Int32Array(n.util.computeStrides(u.shape)).buffer),b=new Uint8Array(new Int32Array(p).buffer),y=new Uint8Array(new Int32Array(n.util.computeStrides(p)).buffer),_=t.dataIdMap.get(f.dataId).id;return te(m,s,"NHWC"===i?1:0,h,u.shape.length-1,b,y,p.length,_),f}};var se={kernelName:n.DepthwiseConv2dNative,backendName:"wasm",setupFunc:function(e){re=e.wasm.cwrap(n.DepthwiseConv2dNative,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=t.filter,i=r.dataIdMap.get(u.dataId).id,o=r.dataIdMap.get(s.dataId).id,d=a.strides,l=a.dilations,c=a.pad,p=a.dimRoundingMode,f=null==l?[1,1]:l,m=n.backend_util.computeConv2DInfo(u.shape,s.shape,d,f,c,p,!0),h=m.filterHeight,b=m.filterWidth,y=m.padInfo.top,_=m.padInfo.right,v=m.padInfo.bottom,g=m.padInfo.left,w=m.dilationHeight,k=m.dilationWidth,I=m.strideHeight,S=m.strideWidth,A=m.inChannels,M=m.outChannels,E="SAME"===m.padInfo.type?1:0;if("channelsLast"!==m.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+m.dataFormat+"'. Please use 'channelsLast'.");var x=r.makeOutput(m.outShape,"float32"),N=r.dataIdMap.get(x.dataId).id;return re(i,u.shape[0],u.shape[1],u.shape[2],o,h,b,y,_,v,g,E,w,k,I,S,A,M,N),x}},ie=c(n.Elu),oe=f(n.Equal,!1,"bool"),de=c(n.Exp,"float32");function le(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.input,s=a.dim,i=u.shape.length,o=u.shape.slice(),d=s;return s<0&&(n.util.assert(-(i+1)<=s,(function(){return"Axis must be in the interval ["+-(i+1)+", "+i+"]"})),d=i+s+1),o.splice(d,0,1),T({inputs:{x:u},backend:r,attrs:{shape:o}})}var ce={kernelName:n.ExpandDims,backendName:"wasm",kernelFunc:le};function pe(e){var n=e.attrs,t=n.shape,a=n.value,r=n.dtype,u=e.backend,s=u.makeOutput(t,r);return u.typedArrayFromHeap(s).fill(a),s}var fe,me={kernelName:n.Fill,backendName:"wasm",kernelFunc:pe};var he,be={kernelName:n.FlipLeftRight,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.image,r=t.makeOutput(a.shape,a.dtype),u=t.dataIdMap.get(a.dataId).id,s=t.dataIdMap.get(r.dataId).id,i=a.shape,o=i[0],d=i[1],l=i[2],c=i[3];return fe(u,o,d,l,c,s),r},setupFunc:function(e){fe=e.wasm.cwrap(n.FlipLeftRight,null,["number","number","number","number","number","number"])}},ye=c(n.Floor),_e=f(n.FloorDiv,!1);var ve,ge={kernelName:n.FusedBatchNorm,backendName:"wasm",setupFunc:function(e){he=e.wasm.cwrap(n.FusedBatchNorm,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs.varianceEpsilon,u=a.x,s=a.mean,i=a.variance,o=a.offset,d=a.scale,l=t.dataIdMap.get(u.dataId).id,c=t.dataIdMap.get(s.dataId).id,p=t.dataIdMap.get(i.dataId).id,f=null!=o?t.dataIdMap.get(o.dataId).id:0,m=null!=d?t.dataIdMap.get(d.dataId).id:0,h=t.makeOutput(u.shape,u.dtype);if(0===n.util.sizeFromShape(u.shape))return h;var b=t.dataIdMap.get(h.dataId).id;return he(l,c,p,f,m,r,b),h}};var we,ke={kernelName:n.FusedConv2D,backendName:"wasm",setupFunc:function(e){ve=e.wasm.cwrap(n.FusedConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=t.filter,i=t.bias,d=t.preluActivationWeights,l=a.strides,c=a.pad,p=a.dilations,f=a.dataFormat,m=a.dimRoundingMode,h=a.activation,b=a.leakyreluAlpha,y=n.backend_util.computeConv2DInfo(u.shape,s.shape,l,p,c,m),_=o[h];if(null==_)throw new Error(h+" activation not yet supported for FusedConv2D in the wasm backend.");var v=r.dataIdMap.get(u.dataId).id,g=r.dataIdMap.get(s.dataId).id,w=y.outChannels,k=0;if(null!=i){var I=r.dataIdMap.get(i.dataId);if(1!==I.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank "+I.shape.length+".");if(I.shape[0]!==w)throw new Error("FusedConv2D bias shape ("+I.shape+") does not match the number of output channels ("+w+")");k=I.id}var S=y.filterHeight,A=y.filterWidth,M=y.padInfo.top,E=y.padInfo.right,x=y.padInfo.bottom,N=y.padInfo.left,F=y.dilationHeight,T=y.dilationWidth,O=y.strideHeight,C=y.strideWidth,D=y.inChannels,R="SAME"===y.padInfo.type?1:0,P=y.batchSize,W=y.inHeight,L=y.inWidth;if("NHWC"!==f)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+f+"'. Please use 'NHWC'.");var H=r.makeOutput(y.outShape,"float32"),B=r.dataIdMap.get(H.dataId).id,U=null==d?0:r.dataIdMap.get(d.dataId).id;return ve(v,P,W,L,g,S,A,k,M,E,x,N,R,F,T,O,C,D,w,_,U,b||0,B),H}};var Ie,Se={kernelName:n.FusedDepthwiseConv2D,backendName:"wasm",setupFunc:function(e){we=e.wasm.cwrap(n.FusedDepthwiseConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=t.filter,i=t.bias,d=t.preluActivationWeights,l=a.strides,c=a.pad,p=a.dilations,f=a.dataFormat,m=a.dimRoundingMode,h=a.activation,b=a.leakyreluAlpha,y=n.backend_util.computeConv2DInfo(u.shape,s.shape,l,p,c,m,!0),_=o[h];if(null==_)throw new Error(h+" activation not yet supported for FusedDepthwiseConv2D in the wasm backend.");var v=r.dataIdMap.get(u.dataId).id,g=r.dataIdMap.get(s.dataId).id,w=y.outChannels,k=0;if(null!=i){var I=r.dataIdMap.get(i.dataId);if(1!==I.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank "+I.shape.length+".");if(I.shape[0]!==w)throw new Error("FusedDepthwiseConv2D bias shape ("+I.shape+") does not match the number of output channels ("+w+")");k=I.id}var S=y.filterHeight,A=y.filterWidth,M=y.padInfo.top,E=y.padInfo.right,x=y.padInfo.bottom,N=y.padInfo.left,F=y.dilationHeight,T=y.dilationWidth,O=y.strideHeight,C=y.strideWidth,D=y.inChannels,R="SAME"===y.padInfo.type?1:0,P=y.batchSize,W=y.inHeight,L=y.inWidth;if("NHWC"!==f)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+f+"'. Please use 'NHWC'.");var H=r.makeOutput(y.outShape,"float32"),B=r.dataIdMap.get(H.dataId).id,U=null==d?0:r.dataIdMap.get(d.dataId).id;return we(v,P,W,L,g,S,A,k,M,E,x,N,R,F,T,O,C,D,w,_,U,b||0,B),H}};var Ae,Me={kernelName:n.GatherNd,backendName:"wasm",setupFunc:function(e){Ie=e.wasm.cwrap(n.GatherNd,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=a.params,u=a.indices,s=n.gather_util.prepareAndValidate(r,u),o=s[0],d=s[1],l=s[2],c=s[3],p=t.makeOutput(o,r.dtype);if(0===d)return p;var f=u.shape,m=f[f.length-1],h=t.dataIdMap.get(r.dataId).id,b=t.dataIdMap.get(u.dataId).id,y=new Uint8Array(new Int32Array(c).buffer),_=t.dataIdMap.get(p.dataId).id;return Ie(h,i[r.dtype],b,d,m,l,y,_),p}};var Ee,xe={kernelName:n.GatherV2,backendName:"wasm",setupFunc:function(e){Ae=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,a=e.inputs,r=e.attrs,u=a.x,s=a.indices,o=r.axis,d=r.batchDims,l=n.util.parseAxisParam(o,u.shape)[0],c=t.readSync(s.dataId),p=u.shape[l],f=function(e){var t=c[e];n.util.assert(t<=p-1&&t>=0,(function(){return"GatherV2: the index value "+t+" is not in [0, "+(p-1)+"]"}))},m=0;m<c.length;++m)f(m);var h=n.backend_util.segment_util.collectGatherOpShapeInfo(u,s,l,d),b=T({inputs:{x:u},attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]},backend:t}),y=n.util.sizeFromShape(s.shape),_=T({inputs:{x:s},attrs:{shape:[h.batchSize,y/h.batchSize]},backend:t}),v=[h.batchSize,h.outerSize,y/h.batchSize,h.sliceSize],g=t.makeOutput(v,u.dtype);if(0===n.util.sizeFromShape(u.shape))return g;var w=b.shape.length-1,k=t.dataIdMap.get(b.dataId).id,I=t.dataIdMap.get(_.dataId).id,S=t.dataIdMap.get(g.dataId).id,A=new Uint8Array(new Int32Array(n.util.computeStrides(b.shape)).buffer),M=new Uint8Array(new Int32Array(n.util.computeStrides(v)).buffer);return Ae(k,i[u.dtype],A,w,I,h.batchSize,M,S),t.disposeData(b.dataId),t.disposeData(_.dataId),g.shape=h.outputShape,g}},Ne=f(n.Greater,!1,"bool"),Fe=f(n.GreaterEqual,!1,"bool");var Te,Oe={kernelName:n.LeakyRelu,backendName:"wasm",setupFunc:function(e){Ee=e.wasm.cwrap(n.LeakyRelu,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,a=e.attrs.alpha,r=e.backend,u=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(t.shape,"float32");if(0!==n.util.sizeFromShape(t.shape)){var o=r.dataIdMap.get(s.dataId).id;Ee(u,i[t.dtype],a,o)}return s}},Ce=f(n.Less,!1,"bool"),De=f(n.LessEqual,!1,"bool"),Re=c(n.Log),Pe=f(n.LogicalAnd,!1,"bool");var We,Le={kernelName:n.Max,backendName:"wasm",setupFunc:function(e){Te=e.wasm.cwrap(n.Max,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.reductionIndices,s=r.keepDims,o=a.x,d=t.dataIdMap.get(o.dataId).id,l=o,c=I(o,u,t),p=c.transposed,f=c.axes,m=c.originalAxes,h=c.inputWasTransposed;h&&(l=p,d=t.dataIdMap.get(p.dataId).id);var b=l.shape.length;n.backend_util.assertAxesAreInnerMostDims("max",f,b);var y=n.backend_util.computeOutAndReduceShapes(l.shape,f),_=y[0],v=y[1],g=n.util.sizeFromShape(v),w=t.makeOutput(_,o.dtype);if(0!==n.util.sizeFromShape(l.shape)){var k=t.dataIdMap.get(w.dataId).id;Te(d,i[o.dtype],g,k)}if(h&&t.disposeData(p.dataId),s){var S=n.backend_util.expandShapeToKeepDim(w.shape,m);w.shape=S}return w}},He=f(n.Maximum,!1);var Be,Ue={kernelName:n.MaxPool,backendName:"wasm",setupFunc:function(e){We=e.wasm.cwrap(n.MaxPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=r.dataIdMap.get(u.dataId).id;n.util.assert("float32"===u.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got "+u.dtype+"."}));var i=a.filterSize,o=a.strides,d=a.pad,l=a.dimRoundingMode,c=n.backend_util.computePool2DInfo(u.shape,i,o,1,d,l),p=c.filterHeight,f=c.filterWidth,m=c.padInfo.top,h=c.padInfo.right,b=c.padInfo.bottom,y=c.padInfo.left,_=c.dilationHeight,v=c.dilationWidth,g=c.strideHeight,w=c.strideWidth,k=c.inChannels,I=c.outChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+c.dataFormat+"'. Please use 'channelsLast'.");var S=r.makeOutput(c.outShape,"float32"),A=r.dataIdMap.get(S.dataId).id;return We(s,u.shape[0],u.shape[1],u.shape[2],p,f,m,h,b,y,_,v,g,w,k,I,A),S}};var ze,je={kernelName:n.Mean,backendName:"wasm",setupFunc:function(e){Be=e.wasm.cwrap(n.Mean,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.axis,s=r.keepDims,i=a.x,o=t.dataIdMap.get(i.dataId).id,d=o,l=i,c=I(i,u,t),p=c.transposed,f=c.axes,m=c.originalAxes,h=c.inputWasTransposed,b=f;if(h){var y=t.dataIdMap.get(p.dataId).id;y!==o&&(l=p,d=y,b=n.backend_util.getInnerMostAxes(b.length,l.shape.length))}n.backend_util.assertAxesAreInnerMostDims("mean",b,l.shape.length);var _=n.backend_util.computeOutAndReduceShapes(l.shape,b),v=_[0],g=_[1],w=n.util.sizeFromShape(g),k=l;"float32"!==l.dtype&&(k=H({backend:t,inputs:{x:l},attrs:{dtype:"float32"}}),d=t.dataIdMap.get(k.dataId).id);var S=t.makeOutput(v,"float32");if(0!==n.util.sizeFromShape(l.shape)){var A=t.dataIdMap.get(S.dataId).id;Be(d,w,A)}if(h&&t.disposeData(p.dataId),s){var M=n.backend_util.expandShapeToKeepDim(S.shape,m);S.shape=M}return"float32"!==l.dtype&&t.disposeData(k.dataId),S}};var qe,Ve,Ge={kernelName:n.Min,backendName:"wasm",setupFunc:function(e){ze=e.wasm.cwrap(n.Min,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.axis,s=r.keepDims,o=a.x,d=t.dataIdMap.get(o.dataId).id,l=d,c=o,p=I(o,u,t),f=p.transposed,m=p.axes,h=p.originalAxes,b=p.inputWasTransposed;if(b){var y=t.dataIdMap.get(f.dataId).id;y!==d&&(c=f,l=y)}var _=c.shape.length;n.backend_util.assertAxesAreInnerMostDims("min",m,_);var v=n.backend_util.computeOutAndReduceShapes(c.shape,m),g=v[0],w=v[1],k=n.util.sizeFromShape(w),S=t.makeOutput(g,c.dtype);if(0!==n.util.sizeFromShape(c.shape)){var A=t.dataIdMap.get(S.dataId).id;ze(l,i[o.dtype],k,A)}if(b&&t.disposeData(f.dataId),s){var M=n.backend_util.expandShapeToKeepDim(S.shape,h);S.shape=M}return S}},Ke=f(n.Minimum,!1);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(qe||(qe={}));var Xe,Qe={kernelName:n.MirrorPad,backendName:"wasm",kernelFunc:function(e){var n=e.inputs.x,t=e.backend,a=e.attrs,r=a.paddings,u=a.mode,s=r.map((function(e,t){return e[0]+n.shape[t]+e[1]})),o=t.dataIdMap.get(n.dataId).id,d=t.makeOutput(s,n.dtype),l=t.dataIdMap.get(d.dataId).id,c=new Uint8Array(new Int32Array(n.shape).buffer),p=r.map((function(e){return e[0]})),f=r.map((function(e){return e[1]})),m=new Uint8Array(new Int32Array(p).buffer),h=new Uint8Array(new Int32Array(f).buffer);return Ve(o,c,n.shape.length,i[n.dtype],m,h,qe[u],l),d},setupFunc:function(e){Ve=e.wasm.cwrap(n.MirrorPad,null,["number","array","number","number","array","array","number","number"])}},Ye=f(n.Multiply,!0),Ze=c(n.Neg);function Je(e,n){var t=new Int32Array(e.wasm.HEAPU8.buffer,n,4),a=t[0],r=t[1],u=t[2],s=t[3];return e.wasm._free(n),{pSelectedIndices:a,selectedSize:r,pSelectedScores:u,pValidOutputs:s}}var $e,en={kernelName:n.NonMaxSuppressionV3,backendName:"wasm",setupFunc:function(e){Xe=e.wasm.cwrap(n.NonMaxSuppressionV3,"number",["number","number","number","number","number"])},kernelFunc:function(e){var n=e.backend,t=e.inputs,a=e.attrs,r=a.iouThreshold,u=a.maxOutputSize,s=a.scoreThreshold,i=t.boxes,o=t.scores,d=n.dataIdMap.get(i.dataId).id,l=n.dataIdMap.get(o.dataId).id,c=Je(n,Xe(d,l,u,r,s)),p=c.pSelectedIndices,f=c.selectedSize,m=c.pSelectedScores,h=c.pValidOutputs;return n.wasm._free(m),n.wasm._free(h),n.makeOutput([f],"int32",p)}};var nn,tn={kernelName:n.NonMaxSuppressionV4,backendName:"wasm",setupFunc:function(e){$e=e.wasm.cwrap(n.NonMaxSuppressionV4,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var n=e.backend,t=e.inputs,a=e.attrs,r=a.iouThreshold,u=a.maxOutputSize,s=a.scoreThreshold,i=a.padToMaxOutputSize,o=t.boxes,d=t.scores,l=n.dataIdMap.get(o.dataId).id,c=n.dataIdMap.get(d.dataId).id,p=Je(n,$e(l,c,u,r,s,i)),f=p.pSelectedIndices,m=p.selectedSize,h=p.pSelectedScores,b=p.pValidOutputs;return n.wasm._free(h),[n.makeOutput([m],"int32",f),n.makeOutput([],"int32",b)]}};var an,rn={kernelName:n.NonMaxSuppressionV5,backendName:"wasm",setupFunc:function(e){nn=e.wasm.cwrap(n.NonMaxSuppressionV5,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.backend,t=e.inputs,a=e.attrs,r=a.iouThreshold,u=a.maxOutputSize,s=a.scoreThreshold,i=a.softNmsSigma,o=t.boxes,d=t.scores,l=n.dataIdMap.get(o.dataId).id,c=n.dataIdMap.get(d.dataId).id,p=Je(n,nn(l,c,u,r,s,i)),f=p.pSelectedIndices,m=p.selectedSize,h=p.pSelectedScores,b=p.pValidOutputs;return n.wasm._free(b),[n.makeOutput([m],"int32",f),n.makeOutput([m],"float32",h)]}},un=f(n.NotEqual,!1,"bool");var sn={kernelName:n.OneHot,backendName:"wasm",setupFunc:function(e){an=e.wasm.cwrap(n.OneHot,null,["number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.indices,u=a.depth,s=a.onValue,i=a.offValue,o=t.makeOutput(r.shape.concat([u]),"int32"),d=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(r.dataId).id;return an(l,u,s,i,d),o}};var on={kernelName:n.OnesLike,backendName:"wasm",kernelFunc:function(e){var n=e.inputs.x,t=e.backend,a=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(a).fill(1),a}};var dn,ln={kernelName:n.Pack,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs.axis;if(1===t.length)return le({inputs:{input:t[0]},backend:a,attrs:{dim:r}});var u=t[0].shape,s=t[0].dtype;t.forEach((function(e){n.util.assertShapesMatch(u,e.shape,"All tensors passed to stack must have matching shapes"),n.util.assert(s===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],o=q({inputs:t.map((function(e){var n=le({inputs:{input:e},backend:a,attrs:{dim:r}});return i.push(n),n})),backend:a,attrs:{axis:r}});return i.forEach((function(e){return a.disposeData(e.dataId)})),o}};var cn,pn={kernelName:n.PadV2,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,a=e.backend,r=e.attrs,u=r.paddings,s=r.constantValue,o=u.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===n.util.sizeFromShape(t.shape))return pe({backend:a,attrs:{shape:o,value:s,dtype:t.dtype}});var d=a.dataIdMap.get(t.dataId).id,l=a.makeOutput(o,t.dtype),c=a.dataIdMap.get(l.dataId).id,p=new Uint8Array(new Int32Array(t.shape).buffer),f=u.map((function(e){return e[0]})),m=u.map((function(e){return e[1]})),h=new Uint8Array(new Int32Array(f).buffer),b=new Uint8Array(new Int32Array(m).buffer);return dn(d,p,t.shape.length,i[t.dtype],h,b,s,c),l},setupFunc:function(e){dn=e.wasm.cwrap(n.PadV2,null,["number","array","number","number","array","array","number","number"])}},fn=f(n.Pow,!1);var mn,hn={kernelName:n.Prelu,backendName:"wasm",setupFunc:function(e){cn=e.wasm.cwrap(n.Prelu,null,["number","number","number"])},kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.x,r=n.alpha,u=t.dataIdMap.get(a.dataId).id,s=t.dataIdMap.get(r.dataId).id,i=u,o=a,d=o;"float32"!==o.dtype&&(d=H({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),i=t.dataIdMap.get(d.dataId).id);var l=t.makeOutput(a.shape,"float32"),c=t.dataIdMap.get(l.dataId).id;return cn(i,s,c),"float32"!==o.dtype&&t.disposeData(d.dataId),l}};var bn,yn={kernelName:n.Prod,backendName:"wasm",setupFunc:function(e){mn=e.wasm.cwrap(n.Prod,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.axis,s=r.keepDims,o=a.x,d=t.dataIdMap.get(o.dataId).id,l=d,c=o,p=I(o,u,t),f=p.transposed,m=p.axes,h=p.originalAxes,b=p.inputWasTransposed,y=m;if(b){var _=t.dataIdMap.get(f.dataId).id;_!==d&&(c=f,l=_,y=n.backend_util.getInnerMostAxes(y.length,c.shape.length))}n.backend_util.assertAxesAreInnerMostDims("prod",y,c.shape.length);var v=n.backend_util.computeOutAndReduceShapes(c.shape,y),g=v[0],w=v[1],k=n.util.sizeFromShape(w),S=t.makeOutput(g,c.dtype);if(0!==n.util.sizeFromShape(c.shape)){var A=t.dataIdMap.get(S.dataId).id;mn(l,k,i[S.dtype],A)}if(b&&t.disposeData(f.dataId),s){var M=n.backend_util.expandShapeToKeepDim(S.shape,h);S.shape=M}return S}},_n={kernelName:n.Range,backendName:"wasm",kernelFunc:function(e){var t=e.backend,a=e.attrs,r=a.start,u=a.stop,s=a.step,i=a.dtype,o=function(e,t,a,r){if(e===t||e<t&&a<0||t<e&&a>1)return n.util.makeZerosTypedArray(0,r);const u=Math.abs(Math.ceil((t-e)/a)),s=n.util.makeZerosTypedArray(u,r);t<e&&1===a&&(a=-1),s[0]=e;for(let e=1;e<s.length;e++)s[e]=s[e-1]+a;return s}(r,u,s,i),d=t.makeOutput([o.length],i);return t.typedArrayFromHeap(d).set(o),d}},vn=f(n.RealDiv,!0),gn=c(n.Relu),wn=c(n.Relu6);var kn,In={kernelName:n.ResizeBilinear,backendName:"wasm",setupFunc:function(e){bn=e.wasm.cwrap(n.ResizeBilinear,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,a=e.backend,r=e.inputs,u=e.attrs,s=r.images,i=u.alignCorners,o=u.halfPixelCenters,d=u.size,l=d[0],c=d[1],p=s.shape,f=p[0],m=p[1],h=p[2],b=p[3],y=[f,l,c,b],_=a.dataIdMap.get(s.dataId);"float32"!==_.dtype&&(t=H({backend:a,inputs:{x:s},attrs:{dtype:"float32"}}),_=a.dataIdMap.get(t.dataId));var v=_.id,g=a.makeOutput(y,"float32");if(0===n.util.sizeFromShape(s.shape))return g;var w=a.dataIdMap.get(g.dataId).id;return bn(v,f,m,h,b,l,c,i?1:0,o?1:0,w),null!=t&&a.disposeData(t.dataId),g}};var Sn,An={kernelName:n.Reverse,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,u=t.x,s=r.dims,i=n.util.parseAxisParam(s,u.shape);if(0===u.shape.length)return y({inputs:{x:u},backend:a});var o=a.makeOutput(u.shape,u.dtype),d=a.dataIdMap.get(u.dataId).id,l=a.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(i).buffer),p=new Uint8Array(new Int32Array(u.shape).buffer);kn(d,c,i.length,p,u.shape.length,l);var f=T({inputs:{x:o},attrs:{shape:u.shape},backend:a});return a.disposeData(o.dataId),f},setupFunc:function(e){kn=e.wasm.cwrap(n.Reverse,null,["number","array","number","array","number","number"])}};var Mn,En={kernelName:n.RotateWithOffset,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,u=t.image,s=r.radians,i=r.fillValue,o=r.center,d=a.makeOutput(u.shape,u.dtype),l=a.dataIdMap.get(u.dataId).id,c=a.dataIdMap.get(d.dataId).id,p=u.shape,f=p[0],m=p[1],h=p[2],b=p[3],y=n.backend_util.getImageCenter(o,m,h),_=y[0],v=y[1],g="number"==typeof i?[i,i,i,0===i?0:255]:i.concat([255]),w=new Uint8Array(new Int32Array(g).buffer);return Sn(l,f,m,h,b,s,_,v,w,g.length,c),d},setupFunc:function(e){Sn=e.wasm.cwrap(n.RotateWithOffset,null,["number","number","number","number","number","number","number","number","array","number","number"])}},xn=c(n.Round),Nn=c(n.Rsqrt);var Fn,Tn={kernelName:n.ScatterNd,backendName:"wasm",setupFunc:function(e){Mn=e.wasm.cwrap(n.ScatterNd,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=a.indices,s=a.updates,o=r.shape,d=t.makeOutput(o,s.dtype);if(0===n.util.sizeFromShape(o))return d;var l=n.scatter_util.calculateShapes(s,u,o),c=l.sliceRank,p=l.numUpdates,f=l.sliceSize,m=l.strides,h=l.outputSize,b=t.dataIdMap.get(u.dataId).id,y=t.dataIdMap.get(s.dataId).id,_=new Uint8Array(new Int32Array(m).buffer),v=t.dataIdMap.get(d.dataId).id;return Mn(b,y,i[s.dtype],c,p,f,_,h,v),d}};var On,Cn={kernelName:n.Select,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.condition,u=t.t,s=t.e,i=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(u.dataId).id,d=a.dataIdMap.get(s.dataId).id,l=a.makeOutput(u.shape,u.dtype),c=a.dataIdMap.get(l.dataId).id,p=r.shape.length,f=u.shape.length,m=0===p||p>1||1===f?1:n.util.sizeFromShape(u.shape.slice(1));return Fn(i,o,d,m,c),l},setupFunc:function(e){Fn=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var Dn,Rn={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){On=e.wasm.cwrap(n.Sigmoid,null,["number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs.x,r=t.dataIdMap.get(a.dataId).id,u=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(u.dataId).id;return 0===n.util.sizeFromShape(u.shape)||On(r,s),u}},Pn=c(n.Sin);var Wn={kernelName:n.Softmax,backendName:"wasm",setupFunc:function(e){Dn=e.wasm.cwrap(n.Softmax,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs.logits,r=e.attrs.dim,u=t.dataIdMap.get(a.dataId).id,s=t.makeOutput(a.shape,a.dtype),i=t.dataIdMap.get(s.dataId).id,o=a.shape[r],d=n.util.sizeFromShape(a.shape)/o;return 0===n.util.sizeFromShape(s.shape)||Dn(u,i,o,d),s}};var Ln={kernelName:n.SpaceToBatchND,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,u=t.x,s=r.blockShape,i=r.paddings,o=n.util.sizeFromShape(s),d=[[0,0]];d.push.apply(d,i);for(var l=1+s.length;l<u.shape.length;++l)d.push([0,0]);var c=pn.kernelFunc({inputs:{x:u},backend:a,attrs:{paddings:d,constantValue:0}}),p=n.backend_util.getReshaped(c.shape,s,o,!1),f=n.backend_util.getPermuted(p.length,s.length,!1),m=n.backend_util.getReshapedPermuted(c.shape,s,o,!1),h=T({inputs:{x:c},backend:a,attrs:{shape:p}}),b=g({inputs:{x:h},backend:a,attrs:{perm:f}}),y=T({inputs:{x:b},backend:a,attrs:{shape:m}});return a.disposeData(c.dataId),a.disposeData(h.dataId),a.disposeData(b.dataId),y}};var Hn,Bn={kernelName:n.SplitV,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,u=t.x,s=a.numOrSizeSplits,i=a.axis,o=n.util.parseAxisParam(i,u.shape)[0],d=n.backend_util.prepareSplitSize(u,s,o),l=new Array(u.shape.length).fill(0),c=u.shape.slice();return d.map((function(e){var n=c.slice();n[o]=e;var t=P({inputs:{x:u},attrs:{begin:l,size:n},backend:r});return l[o]+=e,t}))}},Un=c(n.Sqrt),zn=c(n.Square),jn=f(n.SquaredDifference,!0);var qn,Vn={kernelName:n.Step,backendName:"wasm",setupFunc:function(e){Hn=e.wasm.cwrap(n.Step,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.backend,t=e.inputs,a=e.attrs.alpha,r=t.x,u=n.dataIdMap.get(r.dataId).id,s=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(s.dataId).id;return Hn(u,a,i[r.dtype],o),s}};var Gn,Kn={kernelName:n.StridedSlice,backendName:"wasm",setupFunc:function(e){qn=e.wasm.cwrap(n.StridedSlice,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,a=e.backend,r=e.inputs,u=e.attrs,s=r.x,i=u.begin,o=u.end,d=u.strides,l=u.beginMask,c=u.endMask,p=u.ellipsisMask,f=u.newAxisMask,m=u.shrinkAxisMask,h=n.slice_util.sliceInfo(s.shape,i,o,d,l,c,p,f,m),b=h.finalShapeSparse,y=h.finalShape,_=h.isIdentity,v=h.sliceDim0,g=h.isSimpleSlice,w=h.begin,k=h.end,I=h.strides;if(_)t=T({inputs:{x:s},backend:a,attrs:{shape:y}});else if(v||g){n.util.assert(s.shape.length>=1,(function(){return"Input must have rank at least 1, got: "+s.shape.length}));var S=n.slice_util.computeOutShape(w,k,I),A=P({inputs:{x:s},backend:a,attrs:{begin:w,size:S}});t=T({inputs:{x:A},backend:a,attrs:{shape:y}}),a.disposeData(A.dataId)}else{var M=a.makeOutput(b,"float32"),E=a.dataIdMap.get(s.dataId).id,x=new Uint8Array(new Int32Array(n.util.computeStrides(s.shape)).buffer),N=new Uint8Array(new Int32Array(w).buffer),F=new Uint8Array(new Int32Array(k).buffer),O=new Uint8Array(new Int32Array(I).buffer),C=new Uint8Array(new Int32Array(b).buffer),D=new Uint8Array(new Int32Array(n.util.computeStrides(b)).buffer),R=a.dataIdMap.get(M.dataId).id;qn(E,x,s.shape.length,N,F,O,C,D,b.length,R),t=T({inputs:{x:M},backend:a,attrs:{shape:y}}),a.disposeData(M.dataId)}return t}},Xn=f(n.Sub,!0);var Qn,Yn={kernelName:n.Sum,backendName:"wasm",setupFunc:function(e){Gn=e.wasm.cwrap(n.Sum,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,r=e.attrs,u=r.axis,s=r.keepDims,o=a.x,d=t.dataIdMap.get(o.dataId).id,l=d,c=o,p=I(o,u,t),f=p.transposed,m=p.axes,h=p.originalAxes,b=p.inputWasTransposed,y=m;if(b){var _=t.dataIdMap.get(f.dataId).id;_!==d&&(c=f,l=_,y=n.backend_util.getInnerMostAxes(y.length,c.shape.length))}n.backend_util.assertAxesAreInnerMostDims("sum",y,c.shape.length);var v=n.backend_util.computeOutAndReduceShapes(c.shape,y),g=v[0],w=v[1],k=n.util.sizeFromShape(w),S=t.makeOutput(g,c.dtype);if(0!==n.util.sizeFromShape(c.shape)){var A=t.dataIdMap.get(S.dataId).id;Gn(l,k,i[S.dtype],A)}if(b&&t.disposeData(f.dataId),s){var M=n.backend_util.expandShapeToKeepDim(S.shape,h);S.shape=M}return S}},Zn=c(n.Tan),Jn=c(n.Tanh);var $n,et={kernelName:n.Tile,backendName:"wasm",setupFunc:function(e){Qn=e.wasm.cwrap(n.Tile,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,u=t.dataIdMap.get(r.dataId).id,s=a.reps,o=new Array(r.shape.length),d=0;d<o.length;d++)o[d]=r.shape[d]*s[d];var l=new Uint8Array(new Int32Array(r.shape).buffer),c=new Uint8Array(new Int32Array(o).buffer),p=t.makeOutput(o,r.dtype),f=t.dataIdMap.get(p.dataId).id;return Qn(u,l,r.shape.length,c,o.length,i[p.dtype],f),p}};var nt,tt={kernelName:n.TopK,backendName:"wasm",setupFunc:function(e){$n=e.wasm.cwrap(n.TopK,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,u=a.k,s=a.sorted,o=t.dataIdMap.get(r.dataId).id,d=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=u;var c=t.makeOutput(l,r.dtype),p=t.dataIdMap.get(c.dataId).id,f=t.makeOutput(l,"int32"),m=t.dataIdMap.get(f.dataId).id;return $n(o,d,r.shape.length,i[r.dtype],u,s,p,m),[c,f]}};var at={kernelName:n.Transform,backendName:"wasm",setupFunc:function(e){nt=e.wasm.cwrap(n.Transform,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,a=e.backend,r=e.inputs,u=e.attrs,s=r.image,i=r.transforms,o=u.interpolation,d=u.fillMode,l=u.fillValue,c=u.outputShape,p=s.shape,f=p[0],m=p[1],h=p[2],b=p[3],y=null!=c?c:[m,h],_=y[0],v=y[1],g=[f,_,v,b],w=new Uint8Array(new Int32Array(n.util.computeStrides(s.shape)).buffer),k=a.makeOutput(g,s.dtype),I=a.dataIdMap.get(k.dataId).id,S=a.dataIdMap.get(s.dataId).id,A=a.dataIdMap.get(i.dataId).id,M="nearest"===o?1:2;switch(d){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1}return nt(S,A,i.shape[0]>1,f,_,v,b,h,m,w,s.shape.length-1,M,t,l,I),k}};var rt={kernelName:n.Unpack,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.value,u=a.axis;u<0&&(u+=r.shape.length);for(var s=r.shape[u],i=r.shape.length,o=new Array(i-1),d=0,l=0;l<i;l++)l!==u&&(o[d++]=r.shape[l]);var c=new Array(s),p=new Array(i).fill(0),f=r.shape.slice();for(f[u]=1,l=0;l<c.length;l++)p[u]=l,c[l]=P({inputs:{x:r},attrs:{begin:p,size:f},backend:t});return c.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:o}}))}};for(var ut={kernelName:n.ZerosLike,backendName:"wasm",kernelFunc:function(e){var n=e.inputs.x,t=e.backend,a=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(a).fill(0),a}},st=0,it=[p,h,b,A,E,N,F,D,L,U,z,j,G,X,Z,J,$,ne,ae,ue,se,ie,oe,de,ce,me,be,ye,_e,l,ge,ke,Se,Me,xe,Ne,Fe,v,Oe,Ce,De,Re,Pe,Le,He,Ue,je,Ge,Ke,Qe,Ye,Ze,en,tn,rn,un,sn,on,ln,pn,fn,hn,yn,_n,vn,gn,wn,C,In,An,En,Nn,xn,Tn,Cn,Rn,Pn,W,Wn,Ln,Bn,Un,zn,jn,Vn,Kn,Xn,Yn,Zn,Jn,et,tt,at,k,rt,ut];st<it.length;st++){var ot=it[st];n.registerKernel(ot)}var dt=function(e,n){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function lt(e,n,t,a){return new(t||(t=Promise))((function(r,u){function s(e){try{o(a.next(e))}catch(e){u(e)}}function i(e){try{o(a.throw(e))}catch(e){u(e)}}function o(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}o((a=a.apply(e,n||[])).next())}))}function ct(e,n){var t,a,r,u,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(u){return function(i){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,a&&(r=2&u[0]?a.return:u[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,u[1])).done)return r;switch(a=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,a=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){s.label=u[1];break}if(6===u[0]&&s.label<r[1]){s.label=r[1],r=u;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(u);break}r[2]&&s.ops.pop(),s.trys.pop();continue}u=n.call(e,s)}catch(e){u=[6,e],a=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}}var pt=void 0,ft=n.env();ft.registerFlag("WASM_HAS_SIMD_SUPPORT",(function(){return lt(pt,void 0,void 0,(function(){return ct(this,(function(e){return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))]}))}))})),ft.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(function(){return lt(pt,void 0,void 0,(function(){return ct(this,(function(e){if(ft.get("IS_NODE"))return[2,!1];try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))]}catch(e){return[2,!1]}return[2]}))}))}));var mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ht(e,n){return e(n={exports:{}},n.exports),n.exports}var bt=ht((function(e,n){var i,o=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(i=i||__filename),function(e){function n(){return R.buffer!=L&&te(R.buffer),H}function o(){return R.buffer!=L&&te(R.buffer),B}function d(){return R.buffer!=L&&te(R.buffer),U}function l(){return R.buffer!=L&&te(R.buffer),z}function c(){return R.buffer!=L&&te(R.buffer),j}var p,f,m="undefined"!=typeof(e=e||{})?e:{};m.ready=new Promise((function(e,n){p=e,f=n}));var h,b={};for(h in m)m.hasOwnProperty(h)&&(b[h]=m[h]);var y=function(e,n){throw n},_=!1,v=!1,g=!1,w=!1;_="object"==typeof window,v="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,w=!_&&!g&&!v;var k=m.ENVIRONMENT_IS_PTHREAD||!1;k&&(L=m.buffer);var I,S,A,M,E,x="";function N(e){return m.locateFile?m.locateFile(e,x):x+e}if(g){var F;x=v?t.dirname(x)+"/":__dirname+"/",I=function(e,n){return M||(M=a),E||(E=t),e=E.normalize(e),M.readFileSync(e,n?null:"utf8")},A=function(e){var n=I(e,!0);return n.buffer||(n=new Uint8Array(n)),V(n.buffer),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ht))throw e})),process.on("unhandledRejection",ve),y=function(e){process.exit(e)},m.inspect=function(){return"[Emscripten Module object]"};try{F=r}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}mt.Worker=F.Worker}else w?("undefined"!=typeof read&&(I=function(e){return read(e)}),A=function(e){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(V("object"==typeof(n=read(e,"binary"))),n)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(y=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(_||v)&&(v?x=self.location.href:"undefined"!=typeof document&&document.currentScript&&(x=document.currentScript.src),"undefined"!=typeof i&&i&&(x=i),x=0!==x.indexOf("blob:")?x.substr(0,x.lastIndexOf("/")+1):"",g?(I=function(e,n){return M||(M=a),E||(E=t),e=E.normalize(e),M.readFileSync(e,n?null:"utf8")},A=function(e){var n=I(e,!0);return n.buffer||(n=new Uint8Array(n)),V(n.buffer),n}):(I=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},v&&(A=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),S=function(e,n,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?n(a.response):t()},a.onerror=t,a.send(null)}));g&&"undefined"==typeof performance&&(mt.performance=u.performance);var T,O=m.print||console.log.bind(console),C=m.printErr||console.warn.bind(console);for(h in b)b.hasOwnProperty(h)&&(m[h]=b[h]);function D(e){D.shown||(D.shown={}),D.shown[e]||(D.shown[e]=1,C(e))}b=null,m.arguments&&m.arguments,m.thisProgram&&m.thisProgram,m.quit&&(y=m.quit),m.wasmBinary&&(T=m.wasmBinary);var R,P,W=m.noExitRuntime||!0;"object"!=typeof WebAssembly&&ve("no native wasm support detected");var L,H,B,U,z,j,q=!1;function V(e,n){e||ve("Assertion failed: "+n)}function G(e){var n=m["_"+e];return V(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function K(e,n,t,a,r){var u={string:function(e){var n=0;if(null!=e&&0!==e){var t=1+(e.length<<2);J(e,n=dt(t),t)}return n},array:function(e){var n=dt(e.length);return ee(e,n),n}},s=G(e),i=[],o=0;if(a)for(var d=0;d<a.length;d++){var l=u[t[d]];l?(0===o&&(o=it()),i[d]=l(a[d])):i[d]=a[d]}var c=s.apply(null,i);return c=function(e){return"string"===n?Y(e):"boolean"===n?Boolean(e):e}(c),0!==o&&ot(o),c}function X(e,n,t,a){var r=(t=t||[]).every((function(e){return"number"===e}));return"string"!==n&&r&&!a?G(e):function(){return K(e,n,t,arguments)}}function Q(e,n,t){for(var a=n+t,r="";!(n>=a);){var u=e[n++];if(!u)return r;if(128&u){var s=63&e[n++];if(192!=(224&u)){var i=63&e[n++];if((u=224==(240&u)?(15&u)<<12|s<<6|i:(7&u)<<18|s<<12|i<<6|63&e[n++])<65536)r+=String.fromCharCode(u);else{var o=u-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}}else r+=String.fromCharCode((31&u)<<6|s)}else r+=String.fromCharCode(u)}return r}function Y(e,n){return e?Q(o(),e,n):""}function Z(e,n,t,a){if(!(a>0))return 0;for(var r=t,u=t+a-1,s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++s)),i<=127){if(t>=u)break;n[t++]=i}else if(i<=2047){if(t+1>=u)break;n[t++]=192|i>>6,n[t++]=128|63&i}else if(i<=65535){if(t+2>=u)break;n[t++]=224|i>>12,n[t++]=128|i>>6&63,n[t++]=128|63&i}else{if(t+3>=u)break;n[t++]=240|i>>18,n[t++]=128|i>>12&63,n[t++]=128|i>>6&63,n[t++]=128|63&i}}return n[t]=0,t-r}function J(e,n,t){return Z(e,o(),n,t)}function $(e){for(var n=0,t=0;t<e.length;++t){var a=e.charCodeAt(t);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++t)),a<=127?++n:n+=a<=2047?2:a<=65535?3:4}return n}function ee(e,t){n().set(e,t)}function ne(e,n){return e%n>0&&(e+=n-e%n),e}function te(e){L=e,m.HEAP8=H=new Int8Array(e),m.HEAP16=new Int16Array(e),m.HEAP32=U=new Int32Array(e),m.HEAPU8=B=new Uint8Array(e),m.HEAPU16=new Uint16Array(e),m.HEAPU32=z=new Uint32Array(e),m.HEAPF32=new Float32Array(e),m.HEAPF64=j=new Float64Array(e)}var ae,re=m.INITIAL_MEMORY||16777216;if(k)R=m.wasmMemory,L=m.buffer;else if(m.wasmMemory)R=m.wasmMemory;else if(!((R=new WebAssembly.Memory({initial:re/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw C("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),g&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");R&&(L=R.buffer),re=L.byteLength,te(L);var ue=[],se=[],ie=[],oe=[];function de(){if(!k){if(m.preRun)for("function"==typeof m.preRun&&(m.preRun=[m.preRun]);m.preRun.length;)fe(m.preRun.shift());Te(ue)}}function le(){k||Te(se)}function ce(){k||Te(ie)}function pe(){if(!k){if(m.postRun)for("function"==typeof m.postRun&&(m.postRun=[m.postRun]);m.postRun.length;)me(m.postRun.shift());Te(oe)}}function fe(e){ue.unshift(e)}function me(e){oe.unshift(e)}k||se.push({func:function(){Gn()}});var he=0,be=null;function ye(e){V(!k,"addRunDependency cannot be used in a pthread worker"),he++,m.monitorRunDependencies&&m.monitorRunDependencies(he)}function _e(e){if(he--,m.monitorRunDependencies&&m.monitorRunDependencies(he),0==he&&be){var n=be;be=null,n()}}function ve(e){m.onAbort&&m.onAbort(e),k&&console.error("Pthread aborting at "+(new Error).stack),C(e+=""),q=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw f(n),n}function ge(e,n){return String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n)}m.preloadedImages={},m.preloadedAudios={};var we="data:application/octet-stream;base64,";function ke(e){return ge(e,we)}var Ie="file://";function Se(e){return ge(e,Ie)}var Ae="tfjs-backend-wasm-threaded-simd.wasm";function Me(e){try{if(e==Ae&&T)return new Uint8Array(T);if(A)return A(e);throw"both async and sync fetching of the wasm failed"}catch(e){ve(e)}}function Ee(){if(!T&&(_||v)){if("function"==typeof fetch&&!Se(Ae))return fetch(Ae,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Ae+"'";return e.arrayBuffer()})).catch((function(){return Me(Ae)}));if(S)return new Promise((function(e,n){S(Ae,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return Me(Ae)}))}function xe(){var e={a:Vn};function n(e,n){var t=e.exports;if(m.asm=t,ae=m.asm.I,P=n,!k){var a=Le.unusedWorkers.length;Le.unusedWorkers.forEach((function(e){Le.loadWasmModuleToWorker(e,(function(){--a||_e()}))}))}}function t(e){n(e.instance,e.module)}function a(n){return Ee().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){C("failed to asynchronously prepare wasm: "+e),ve(e)}))}if(k||ye(),m.instantiateWasm)try{return m.instantiateWasm(e,n)}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return(T||"function"!=typeof WebAssembly.instantiateStreaming||ke(Ae)||Se(Ae)||"function"!=typeof fetch?a(t):fetch(Ae,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(t)}))}))).catch(f),{}}ke(Ae)||(Ae=N(Ae));var Ne={10520:function(){throw"Canceled!"},10538:function(e,n){setTimeout((function(){tt(e,n)}),0)}};function Fe(){Le.initRuntime()}function Te(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var t=n.func;"number"==typeof t?void 0===n.arg?ae.get(t)():ae.get(t)(n.arg):t(void 0===n.arg?null:n.arg)}else n(m)}}var Oe={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function Ce(e,t){if(e<=0||e>n().length||!0&e||t<0)return-28;if(0==t)return 0;t>=2147483647&&(t=1/0);var a=Atomics.load(d(),ft>>2),r=0;if(a==e&&Atomics.compareExchange(d(),ft>>2,a,0)==a&&(r=1,--t<=0))return 1;var u=Atomics.notify(d(),e>>2,t);if(u>=0)return u+r;throw"Atomics.notify returned an unexpected value "+u}function De(e){if(k)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";d()[e+12>>2]=0;var n=Le.pthreads[e];n.worker.terminate(),Le.freeThreadData(n),Le.runningWorkers.splice(Le.runningWorkers.indexOf(n.worker),1),n.worker.pthread=void 0}function Re(e){if(k)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";Le.pthreads[e].worker.postMessage({cmd:"cancel"})}function Pe(e){if(k)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var n=Le.pthreads[e];if(n){d()[e+12>>2]=0;var t=n.worker;Le.returnWorkerToPool(t)}}m._emscripten_futex_wake=Ce;var We,Le={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=0;e<8;++e)Le.allocateUnusedWorker()},initRuntime:function(){for(var e=Kn(228),n=0;n<57;++n)l()[e/4+n]=0;d()[e+12>>2]=e;var t=e+152;d()[t>>2]=t;var a=Kn(512);for(n=0;n<128;++n)l()[a/4+n]=0;Atomics.store(l(),e+100>>2,a),Atomics.store(l(),e+40>>2,e),st(e,!v,1),et(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;Le.threadExitHandlers.length>0;)Le.threadExitHandlers.pop()();k&&Zn()&&Jn()},runExitHandlersAndDeinitThread:function(e,n){Atomics.store(l(),e+56>>2,1),Atomics.store(l(),e+60>>2,0),Le.runExitHandlers(),Atomics.store(l(),e+4>>2,n),Atomics.store(l(),e+0>>2,1),Ce(e+0,2147483647),st(0,0,0)},threadExit:function(e){var n=Zn();n&&(Le.runExitHandlersAndDeinitThread(n,e),k&&postMessage({cmd:"exit"}))},threadCancel:function(){Le.runExitHandlersAndDeinitThread(Zn(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in Le.pthreads)(a=Le.pthreads[e])&&a.worker&&Le.returnWorkerToPool(a.worker);Le.pthreads={};for(var n=0;n<Le.unusedWorkers.length;++n)(t=Le.unusedWorkers[n]).terminate();for(Le.unusedWorkers=[],n=0;n<Le.runningWorkers.length;++n){var t,a=(t=Le.runningWorkers[n]).pthread;Le.freeThreadData(a),t.terminate()}Le.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var n=d()[e.threadInfoStruct+100>>2];d()[e.threadInfoStruct+100>>2]=0,Xn(n),Xn(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&Xn(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){Le.runWithoutMainThreadQueuedCalls((function(){delete Le.pthreads[e.pthread.threadInfoStruct],Le.unusedWorkers.push(e),Le.runningWorkers.splice(Le.runningWorkers.indexOf(e),1),Le.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){d()[pt>>2]=0;try{e()}finally{d()[pt>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,n){e.onmessage=function(t){var a=t.data,r=a.cmd;if(e.pthread&&(Le.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),a.targetThread&&a.targetThread!=Zn()){var u=Le.pthreads[a.targetThread];return u?u.worker.postMessage(t.data,a.transferList):console.error('Internal error! Worker sent a message "'+r+'" to target pthread '+a.targetThread+", but that thread no longer exists!"),void(Le.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===r)$n();else if("spawnThread"===r)Pn(t.data);else if("cleanupThread"===r)Pe(a.thread);else if("killThread"===r)De(a.thread);else if("cancelThread"===r)Re(a.thread);else if("loaded"===r)e.loaded=!0,n&&n(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===r)O("Thread "+a.threadId+": "+a.text);else if("printErr"===r)C("Thread "+a.threadId+": "+a.text);else if("alert"===r)alert("Thread "+a.threadId+": "+a.text);else if("exit"===r)e.pthread&&Atomics.load(l(),e.pthread.threadInfoStruct+64>>2)&&Le.returnWorkerToPool(e);else if("exitProcess"===r)try{yt(a.returnCode)}catch(t){if(t instanceof ht)return;throw t}else"cancelDone"===r?Le.returnWorkerToPool(e):"objectTransfer"===r?Le.receiveObjectTransfer(t.data):"setimmediate"===t.data.target?e.postMessage(t.data):C("worker sent an unknown command "+r);Le.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){C("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},g&&(e.on("message",(function(n){e.onmessage({data:n})})),e.on("error",(function(n){e.onerror(n)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:m.mainScriptUrlOrBlob||i,wasmMemory:R,wasmModule:P})},allocateUnusedWorker:function(){var e=N("tfjs-backend-wasm-threaded-simd.worker.js");Le.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==Le.unusedWorkers.length&&(Le.allocateUnusedWorker(),Le.loadWasmModuleToWorker(Le.unusedWorkers[0])),Le.unusedWorkers.length>0?Le.unusedWorkers.pop():null},busySpinWait:function(e){for(var n=performance.now()+e;performance.now()<n;);}};function He(e,n){lt(e,n),ot(e)}function Be(){return W}function Ue(e,n){return ae.get(e)(n)}function ze(e,n,t,a){ve("Assertion failed: "+Y(e)+", at: "+[n?Y(n):"unknown filename",t,a?Y(a):"unknown function"])}function je(e,n){_main(e,n)}function qe(e){return d()[Qn()>>2]=e,e}function Ve(e,n){if(k)return $e(1,1,e,n)}function Ge(e,n){if(e==n)postMessage({cmd:"processQueuedMainThreadWork"});else if(k)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var t=Le.pthreads[e],a=t&&t.worker;if(!a)return;a.postMessage({cmd:"processThreadQueue"})}return 1}function Ke(){ve()}function Xe(e,n,t){var a=tn(n,t);return Ne[e].apply(null,a)}function Qe(e,n){}function Ye(e,t,a){if(e<=0||e>n().length||!0&e)return-28;if(_){if(Atomics.load(d(),e>>2)!=t)return-6;var r=performance.now(),u=r+a;for(Atomics.exchange(d(),ft>>2,e);;){if((r=performance.now())>u)return Atomics.exchange(d(),ft>>2,0),-73;if(0==Atomics.exchange(d(),ft>>2,0))break;if($n(),Atomics.load(d(),e>>2)!=t)return-6;Atomics.exchange(d(),ft>>2,e)}return 0}var s=Atomics.wait(d(),e>>2,t,a);if("timed-out"===s)return-73;if("not-equal"===s)return-6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s}function Ze(e,n,t){o().copyWithin(e,n,n+t)}function Je(){return g?s.cpus().length:navigator.hardwareConcurrency}function $e(e,n){for(var t=arguments.length-2,a=it(),r=t,u=dt(8*r),s=u>>3,i=0;i<t;i++){var o=arguments[2+i];c()[s+i]=o}var d=rt(e,r,u,n);return ot(a),d}m.establishStackSpace=He,m.getNoExitRuntime=Be,m.invokeEntryPoint=Ue,We=g?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:k?function(){return performance.now()-m.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var en=[],nn=[];function tn(e,n){var t;for(nn.length=0,n>>=2;t=o()[e++];){var a=t<105;a&&1&n&&n++,nn.push(a?c()[n++>>1]:d()[n]),++n}return nn}function an(e,n,t){en.length=n;for(var a=t>>3,r=0;r<n;r++)en[r]=c()[a+r];return(e<0?Ne[-e-1]:qn[e]).apply(null,en)}function rn(){return o().length}function un(e){try{return R.grow(e-L.byteLength+65535>>>16),te(R.buffer),1}catch(e){}}function sn(e){var n=rn();if(e<=n)return!1;var t=2147483648;if(e>t)return!1;for(var a=1;a<=4;a*=2){var r=n*(1+.2/a);if(r=Math.min(r,e+100663296),un(Math.min(t,ne(Math.max(e,r),65536))))return!0}return!1}var on={inEventHandler:0,removeAllEventListeners:function(){for(var e=on.eventHandlers.length-1;e>=0;--e)on._removeHandler(e);on.eventHandlers=[],on.deferredCalls=[]},registerRemoveEventListeners:function(){on.removeEventListenersRegistered||(on.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,n,t){function a(e,n){if(e.length!=n.length)return!1;for(var t in e)if(e[t]!=n[t])return!1;return!0}for(var r in on.deferredCalls){var u=on.deferredCalls[r];if(u.targetFunction==e&&a(u.argsList,t))return}on.deferredCalls.push({targetFunction:e,precedence:n,argsList:t}),on.deferredCalls.sort((function(e,n){return e.precedence<n.precedence}))},removeDeferredCalls:function(e){for(var n=0;n<on.deferredCalls.length;++n)on.deferredCalls[n].targetFunction==e&&(on.deferredCalls.splice(n,1),--n)},canPerformEventHandlerRequests:function(){return on.inEventHandler&&on.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(on.canPerformEventHandlerRequests())for(var e=0;e<on.deferredCalls.length;++e){var n=on.deferredCalls[e];on.deferredCalls.splice(e,1),--e,n.targetFunction.apply(null,n.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,n){for(var t=0;t<on.eventHandlers.length;++t)on.eventHandlers[t].target!=e||n&&n!=on.eventHandlers[t].eventTypeString||on._removeHandler(t--)},_removeHandler:function(e){var n=on.eventHandlers[e];n.target.removeEventListener(n.eventTypeString,n.eventListenerFunc,n.useCapture),on.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var n=function(n){++on.inEventHandler,on.currentEventHandler=e,on.runDeferredCalls(),e.handlerFunc(n),on.runDeferredCalls(),--on.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=n,e.target.addEventListener(e.eventTypeString,n,e.useCapture),on.eventHandlers.push(e),on.registerRemoveEventListeners();else for(var t=0;t<on.eventHandlers.length;++t)on.eventHandlers[t].target==e.target&&on.eventHandlers[t].eventTypeString==e.eventTypeString&&on._removeHandler(t--)},queueEventHandlerOnThread_iiii:function(e,n,t,a,r){var u=it(),s=dt(12);d()[s>>2]=t,d()[s+4>>2]=a,d()[s+8>>2]=r,ut(0,e,637534208,n,a,s),ot(u)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return Le.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function dn(e){var n=$(e)+1,t=Kn(n);return J(e,t,n),t}function ln(e,n,t,a){var r=it(),u=dt(12),s=0;n&&(s=dn(n)),d()[u>>2]=s,d()[u+4>>2]=t,d()[u+8>>2]=a,ut(0,e,657457152,0,s,u),ot(r)}function cn(e,n,t,a){ln(e,n=n?Y(n):"",t,a)}function pn(e){return e>2?Y(e):e}var fn=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function mn(e){return e=pn(e),fn[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function hn(e){return mn(e)}function bn(e,n,t){var a=hn(e);if(!a)return-4;if(a.canvasSharedPtr&&(d()[a.canvasSharedPtr>>2]=n,d()[a.canvasSharedPtr+4>>2]=t),!a.offscreenCanvas&&a.controlTransferredOffscreen)return a.canvasSharedPtr?(cn(d()[a.canvasSharedPtr+8>>2],e,n,t),1):-4;a.offscreenCanvas&&(a=a.offscreenCanvas);var r=!1;if(a.GLctxObject&&a.GLctxObject.GLctx){var u=a.GLctxObject.GLctx.getParameter(2978);r=0===u[0]&&0===u[1]&&u[2]===a.width&&u[3]===a.height}return a.width=n,a.height=t,r&&a.GLctxObject.GLctx.viewport(0,0,n,t),0}function yn(e,n,t){return k?$e(2,1,e,n,t):bn(e,n,t)}function _n(e,n,t){return hn(e)?bn(e,n,t):yn(e,n,t)}function vn(e){}function gn(e,n){}function wn(e){var n=e.getExtension("ANGLE_instanced_arrays");if(n)return e.vertexAttribDivisor=function(e,t){n.vertexAttribDivisorANGLE(e,t)},e.drawArraysInstanced=function(e,t,a,r){n.drawArraysInstancedANGLE(e,t,a,r)},e.drawElementsInstanced=function(e,t,a,r,u){n.drawElementsInstancedANGLE(e,t,a,r,u)},1}function kn(e){var n=e.getExtension("OES_vertex_array_object");if(n)return e.createVertexArray=function(){return n.createVertexArrayOES()},e.deleteVertexArray=function(e){n.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){n.bindVertexArrayOES(e)},e.isVertexArray=function(e){return n.isVertexArrayOES(e)},1}function In(e){var n=e.getExtension("WEBGL_draw_buffers");if(n)return e.drawBuffers=function(e,t){n.drawBuffersWEBGL(e,t)},1}function Sn(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var An={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){An.lastError||(An.lastError=e)},getNewId:function(e){for(var n=An.counter++,t=e.length;t<n;t++)e[t]=null;return n},getSource:function(e,n,t,a){for(var r="",u=0;u<n;++u){var s=a?d()[a+4*u>>2]:-1;r+=Y(d()[t+4*u>>2],s<0?void 0:s)}return r},createContext:function(e,n){var t=e.getContext("webgl",n);return t?An.registerContext(t,n):0},registerContext:function(e,n){var t=Kn(8);d()[t+4>>2]=Zn();var a={handle:t,attributes:n,version:n.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=a),An.contexts[t]=a,("undefined"==typeof n.enableExtensionsByDefault||n.enableExtensionsByDefault)&&An.initExtensions(a),t},makeContextCurrent:function(e){return An.currentContext=An.contexts[e],m.ctx=Nn=An.currentContext&&An.currentContext.GLctx,!(e&&!Nn)},getContext:function(e){return An.contexts[e]},deleteContext:function(e){An.currentContext===An.contexts[e]&&(An.currentContext=null),"object"==typeof on&&on.removeAllHandlersOnTarget(An.contexts[e].GLctx.canvas),An.contexts[e]&&An.contexts[e].GLctx.canvas&&(An.contexts[e].GLctx.canvas.GLctxObject=void 0),Xn(An.contexts[e].handle),An.contexts[e]=null},initExtensions:function(e){if(e||(e=An.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var n=e.GLctx;wn(n),kn(n),In(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),Sn(n),(n.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&n.getExtension(e)}))}},populateUniformTable:function(e){for(var n=An.programs[e],t=An.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},a=t.uniforms,r=Nn.getProgramParameter(n,35718),u=0;u<r;++u){var s=Nn.getActiveUniform(n,u),i=s.name;t.maxUniformLength=Math.max(t.maxUniformLength,i.length+1),"]"==i.slice(-1)&&(i=i.slice(0,i.lastIndexOf("[")));var o=Nn.getUniformLocation(n,i);if(o){var d=An.getNewId(An.uniforms);a[i]=[s.size,d],An.uniforms[d]=o;for(var l=1;l<s.size;++l){var c=i+"["+l+"]";o=Nn.getUniformLocation(n,c),d=An.getNewId(An.uniforms),An.uniforms[d]=o}}}}},Mn=["default","low-power","high-performance"];function En(e,n){var t=n>>2,a=d()[t+6],r={alpha:!!d()[t+0],depth:!!d()[t+1],stencil:!!d()[t+2],antialias:!!d()[t+3],premultipliedAlpha:!!d()[t+4],preserveDrawingBuffer:!!d()[t+5],powerPreference:Mn[a],failIfMajorPerformanceCaveat:!!d()[t+7],majorVersion:d()[t+8],minorVersion:d()[t+9],enableExtensionsByDefault:d()[t+10],explicitSwapControl:d()[t+11],proxyContextToMainThread:d()[t+12],renderViaOffscreenBackBuffer:d()[t+13]},u=hn(e);return u?r.explicitSwapControl?0:An.createContext(u,r):0}function xn(e,n){return En(e,n)}var Nn,Fn={mappings:{},buffers:[null,[],[]],printChar:function(e,n){var t=Fn.buffers[e];0===n||10===n?((1===e?O:C)(Q(t,0)),t.length=0):t.push(n)},varargs:void 0,get:function(){return Fn.varargs+=4,d()[Fn.varargs-4>>2]},getStr:function(e){return Y(e)},get64:function(e,n){return e}};function Tn(e){return k?$e(3,1,e):0}function On(e,n,t,a,r){if(k)return $e(4,1,e,n,t,a,r)}function Cn(e,n,t,a){if(k)return $e(5,1,e,n,t,a);for(var r=0,u=0;u<t;u++){for(var s=d()[n+8*u>>2],i=d()[n+(8*u+4)>>2],l=0;l<i;l++)Fn.printChar(e,o()[s+l]);r+=i}return d()[a>>2]=r,0}function Dn(e){var n=Le.threadExitHandlers.pop();e&&n()}function Rn(e,n){Le.threadExitHandlers.push((function(){ae.get(e)(n)}))}function Pn(e){if(k)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var n=Le.getNewWorker();if(void 0!==n.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";Le.runningWorkers.push(n);for(var t=Kn(512),a=0;a<128;++a)d()[t+4*a>>2]=0;var r=e.stackBase+e.stackSize,u=Le.pthreads[e.pthread_ptr]={worker:n,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},s=u.threadInfoStruct>>2;Atomics.store(l(),s+16,e.detached),Atomics.store(l(),s+25,t),Atomics.store(l(),s+10,u.threadInfoStruct),Atomics.store(l(),s+20,e.stackSize),Atomics.store(l(),s+19,r),Atomics.store(l(),s+26,e.stackSize),Atomics.store(l(),s+28,r),Atomics.store(l(),s+29,e.detached);var i=Yn()+40;Atomics.store(l(),s+43,i),n.pthread=u;var o={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};n.runPthread=function(){o.time=performance.now(),n.postMessage(o,e.transferList)},n.loaded&&(n.runPthread(),delete n.runPthread)}function Wn(e,n,t,a){if("undefined"==typeof SharedArrayBuffer)return C("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return C("pthread_create called with a null thread pointer!"),28;var r=[];if(k&&0===r.length)return at(687865856,e,n,t,a);var u=0,s=0,i=0;n&&-1!=n?(u=d()[n>>2],u+=81920,s=d()[n+8>>2],i=0!==d()[n+12>>2]):u=2097152;var o=0==s;o?s=ct(16,u):V((s-=u)>0);for(var c=Kn(228),p=0;p<57;++p)l()[(c>>2)+p]=0;d()[e>>2]=c,d()[c+12>>2]=c;var f=c+152;d()[f>>2]=f;var m={stackBase:s,stackSize:u,allocatedOwnStack:o,detached:i,startRoutine:t,pthread_ptr:c,arg:a,transferList:r};return k?(m.cmd="spawnThread",postMessage(m,r)):Pn(m),0}function Ln(){if(k){var e=Zn();if(e&&!Atomics.load(l(),e+56>>2)&&2==Atomics.load(l(),e+0>>2))throw"Canceled!"}}function Hn(){g||v||D("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Bn(e,n,t){if(!e)return C("pthread_join attempted on a null thread pointer!"),Oe.ESRCH;if(k&&Zn()==e)return C("PThread "+e+" is attempting to join to itself!"),Oe.EDEADLK;if(!k&&nt()==e)return C("Main thread "+e+" is attempting to join to itself!"),Oe.EDEADLK;if(d()[e+12>>2]!==e)return C("pthread_join attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),Oe.ESRCH;if(Atomics.load(l(),e+64>>2))return C("Attempted to join thread "+e+", which was already detached!"),Oe.EINVAL;for(t&&Hn();;){var a=Atomics.load(l(),e+0>>2);if(1==a){var r=Atomics.load(l(),e+4>>2);return n&&(d()[n>>2]=r),Atomics.store(l(),e+64>>2,1),k?postMessage({cmd:"cleanupThread",thread:e}):Pe(e),0}if(!t)return Oe.EBUSY;Ln(),k||$n(),Ye(e+0,a,k?100:1)}}function Un(e,n){return Bn(e,n,!0)}function zn(e){if(k)return $e(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return qe(28),-1}k||Le.initMainThreadBlock();var jn,qn=[null,Ve,yn,Tn,On,Cn,zn],Vn={e:ze,r:je,x:Ge,b:Ke,y:Xe,j:Qe,d:Ye,c:Ce,f:We,p:Ze,A:Je,u:an,q:sn,v:_n,i:vn,s:gn,w:xn,l:Tn,n:On,g:Cn,o:Fe,a:R||m.wasmMemory,z:Dn,k:Rn,h:Wn,m:Un,t:zn},Gn=(xe(),m.___wasm_call_ctors=function(){return(Gn=m.___wasm_call_ctors=m.asm.B).apply(null,arguments)}),Kn=(m._init=function(){return(m._init=m.asm.C).apply(null,arguments)},m._init_with_threads_count=function(){return(m._init_with_threads_count=m.asm.D).apply(null,arguments)},m._get_threads_count=function(){return(m._get_threads_count=m.asm.E).apply(null,arguments)},m._register_tensor=function(){return(m._register_tensor=m.asm.F).apply(null,arguments)},m._dispose_data=function(){return(m._dispose_data=m.asm.G).apply(null,arguments)},m._dispose=function(){return(m._dispose=m.asm.H).apply(null,arguments)},m._Abs=function(){return(m._Abs=m.asm.J).apply(null,arguments)},m._Add=function(){return(m._Add=m.asm.K).apply(null,arguments)},m._AddN=function(){return(m._AddN=m.asm.L).apply(null,arguments)},m._All=function(){return(m._All=m.asm.M).apply(null,arguments)},m._Any=function(){return(m._Any=m.asm.N).apply(null,arguments)},m._ArgMax=function(){return(m._ArgMax=m.asm.O).apply(null,arguments)},m._AvgPool=function(){return(m._AvgPool=m.asm.P).apply(null,arguments)},m._BatchMatMul=function(){return(m._BatchMatMul=m.asm.Q).apply(null,arguments)},m._Ceil=function(){return(m._Ceil=m.asm.R).apply(null,arguments)},m._ClipByValue=function(){return(m._ClipByValue=m.asm.S).apply(null,arguments)},m._Conv2D=function(){return(m._Conv2D=m.asm.T).apply(null,arguments)},m._Conv2DBackpropInput=function(){return(m._Conv2DBackpropInput=m.asm.U).apply(null,arguments)},m._Cos=function(){return(m._Cos=m.asm.V).apply(null,arguments)},m._Cosh=function(){return(m._Cosh=m.asm.W).apply(null,arguments)},m._CropAndResize=function(){return(m._CropAndResize=m.asm.X).apply(null,arguments)},m._Cumsum=function(){return(m._Cumsum=m.asm.Y).apply(null,arguments)},m._DepthToSpace=function(){return(m._DepthToSpace=m.asm.Z).apply(null,arguments)},m._DepthwiseConv2dNative=function(){return(m._DepthwiseConv2dNative=m.asm._).apply(null,arguments)},m._Elu=function(){return(m._Elu=m.asm.$).apply(null,arguments)},m._Equal=function(){return(m._Equal=m.asm.aa).apply(null,arguments)},m._Exp=function(){return(m._Exp=m.asm.ba).apply(null,arguments)},m._FlipLeftRight=function(){return(m._FlipLeftRight=m.asm.ca).apply(null,arguments)},m._Floor=function(){return(m._Floor=m.asm.da).apply(null,arguments)},m._FloorDiv=function(){return(m._FloorDiv=m.asm.ea).apply(null,arguments)},m._FusedBatchNorm=function(){return(m._FusedBatchNorm=m.asm.fa).apply(null,arguments)},m._FusedConv2D=function(){return(m._FusedConv2D=m.asm.ga).apply(null,arguments)},m._FusedDepthwiseConv2D=function(){return(m._FusedDepthwiseConv2D=m.asm.ha).apply(null,arguments)},m._Gather=function(){return(m._Gather=m.asm.ia).apply(null,arguments)},m._GatherNd=function(){return(m._GatherNd=m.asm.ja).apply(null,arguments)},m._Greater=function(){return(m._Greater=m.asm.ka).apply(null,arguments)},m._GreaterEqual=function(){return(m._GreaterEqual=m.asm.la).apply(null,arguments)},m._LeakyRelu=function(){return(m._LeakyRelu=m.asm.ma).apply(null,arguments)},m._Less=function(){return(m._Less=m.asm.na).apply(null,arguments)},m._LessEqual=function(){return(m._LessEqual=m.asm.oa).apply(null,arguments)},m._Log=function(){return(m._Log=m.asm.pa).apply(null,arguments)},m._LogicalAnd=function(){return(m._LogicalAnd=m.asm.qa).apply(null,arguments)},m._Max=function(){return(m._Max=m.asm.ra).apply(null,arguments)},m._MaxPool=function(){return(m._MaxPool=m.asm.sa).apply(null,arguments)},m._Maximum=function(){return(m._Maximum=m.asm.ta).apply(null,arguments)},m._Mean=function(){return(m._Mean=m.asm.ua).apply(null,arguments)},m._Min=function(){return(m._Min=m.asm.va).apply(null,arguments)},m._Minimum=function(){return(m._Minimum=m.asm.wa).apply(null,arguments)},m._MirrorPad=function(){return(m._MirrorPad=m.asm.xa).apply(null,arguments)},m._Multiply=function(){return(m._Multiply=m.asm.ya).apply(null,arguments)},m._Neg=function(){return(m._Neg=m.asm.za).apply(null,arguments)},m._NonMaxSuppressionV3=function(){return(m._NonMaxSuppressionV3=m.asm.Aa).apply(null,arguments)},m._NonMaxSuppressionV4=function(){return(m._NonMaxSuppressionV4=m.asm.Ba).apply(null,arguments)},m._NonMaxSuppressionV5=function(){return(m._NonMaxSuppressionV5=m.asm.Ca).apply(null,arguments)},m._NotEqual=function(){return(m._NotEqual=m.asm.Da).apply(null,arguments)},m._OneHot=function(){return(m._OneHot=m.asm.Ea).apply(null,arguments)},m._PadV2=function(){return(m._PadV2=m.asm.Fa).apply(null,arguments)},m._Pow=function(){return(m._Pow=m.asm.Ga).apply(null,arguments)},m._Prelu=function(){return(m._Prelu=m.asm.Ha).apply(null,arguments)},m._Prod=function(){return(m._Prod=m.asm.Ia).apply(null,arguments)},m._RealDiv=function(){return(m._RealDiv=m.asm.Ja).apply(null,arguments)},m._Relu=function(){return(m._Relu=m.asm.Ka).apply(null,arguments)},m._Relu6=function(){return(m._Relu6=m.asm.La).apply(null,arguments)},m._ResizeBilinear=function(){return(m._ResizeBilinear=m.asm.Ma).apply(null,arguments)},m._Reverse=function(){return(m._Reverse=m.asm.Na).apply(null,arguments)},m._RotateWithOffset=function(){return(m._RotateWithOffset=m.asm.Oa).apply(null,arguments)},m._Round=function(){return(m._Round=m.asm.Pa).apply(null,arguments)},m._Rsqrt=function(){return(m._Rsqrt=m.asm.Qa).apply(null,arguments)},m._ScatterNd=function(){return(m._ScatterNd=m.asm.Ra).apply(null,arguments)},m._SelectV2=function(){return(m._SelectV2=m.asm.Sa).apply(null,arguments)},m._Sigmoid=function(){return(m._Sigmoid=m.asm.Ta).apply(null,arguments)},m._Sin=function(){return(m._Sin=m.asm.Ua).apply(null,arguments)},m._Softmax=function(){return(m._Softmax=m.asm.Va).apply(null,arguments)},m._Sqrt=function(){return(m._Sqrt=m.asm.Wa).apply(null,arguments)},m._Square=function(){return(m._Square=m.asm.Xa).apply(null,arguments)},m._SquaredDifference=function(){return(m._SquaredDifference=m.asm.Ya).apply(null,arguments)},m._Step=function(){return(m._Step=m.asm.Za).apply(null,arguments)},m._StridedSlice=function(){return(m._StridedSlice=m.asm._a).apply(null,arguments)},m._Sub=function(){return(m._Sub=m.asm.$a).apply(null,arguments)},m._Sum=function(){return(m._Sum=m.asm.ab).apply(null,arguments)},m._Tan=function(){return(m._Tan=m.asm.bb).apply(null,arguments)},m._Tanh=function(){return(m._Tanh=m.asm.cb).apply(null,arguments)},m._Tile=function(){return(m._Tile=m.asm.db).apply(null,arguments)},m._TopK=function(){return(m._TopK=m.asm.eb).apply(null,arguments)},m._Transform=function(){return(m._Transform=m.asm.fb).apply(null,arguments)},m._Transpose=function(){return(m._Transpose=m.asm.gb).apply(null,arguments)},m.__FusedMatMul=function(){return(m.__FusedMatMul=m.asm.hb).apply(null,arguments)},m._malloc=function(){return(Kn=m._malloc=m.asm.ib).apply(null,arguments)}),Xn=m._free=function(){return(Xn=m._free=m.asm.jb).apply(null,arguments)},Qn=m.___errno_location=function(){return(Qn=m.___errno_location=m.asm.kb).apply(null,arguments)},Yn=m._emscripten_get_global_libc=function(){return(Yn=m._emscripten_get_global_libc=m.asm.lb).apply(null,arguments)},Zn=m._pthread_self=function(){return(Zn=m._pthread_self=m.asm.mb).apply(null,arguments)},Jn=m.___pthread_tsd_run_dtors=function(){return(Jn=m.___pthread_tsd_run_dtors=m.asm.nb).apply(null,arguments)},$n=m._emscripten_main_thread_process_queued_calls=function(){return($n=m._emscripten_main_thread_process_queued_calls=m.asm.ob).apply(null,arguments)},et=(m._emscripten_current_thread_process_queued_calls=function(){return(m._emscripten_current_thread_process_queued_calls=m.asm.pb).apply(null,arguments)},m._emscripten_register_main_browser_thread_id=function(){return(et=m._emscripten_register_main_browser_thread_id=m.asm.qb).apply(null,arguments)}),nt=m._emscripten_main_browser_thread_id=function(){return(nt=m._emscripten_main_browser_thread_id=m.asm.rb).apply(null,arguments)},tt=m.__emscripten_do_dispatch_to_thread=function(){return(tt=m.__emscripten_do_dispatch_to_thread=m.asm.sb).apply(null,arguments)},at=m._emscripten_sync_run_in_main_thread_4=function(){return(at=m._emscripten_sync_run_in_main_thread_4=m.asm.tb).apply(null,arguments)},rt=m._emscripten_run_in_main_runtime_thread_js=function(){return(rt=m._emscripten_run_in_main_runtime_thread_js=m.asm.ub).apply(null,arguments)},ut=m.__emscripten_call_on_thread=function(){return(ut=m.__emscripten_call_on_thread=m.asm.vb).apply(null,arguments)},st=(m._emscripten_tls_init=function(){return(m._emscripten_tls_init=m.asm.wb).apply(null,arguments)},m.__emscripten_thread_init=function(){return(st=m.__emscripten_thread_init=m.asm.xb).apply(null,arguments)}),it=m.stackSave=function(){return(it=m.stackSave=m.asm.yb).apply(null,arguments)},ot=m.stackRestore=function(){return(ot=m.stackRestore=m.asm.zb).apply(null,arguments)},dt=m.stackAlloc=function(){return(dt=m.stackAlloc=m.asm.Ab).apply(null,arguments)},lt=m._emscripten_stack_set_limits=function(){return(lt=m._emscripten_stack_set_limits=m.asm.Bb).apply(null,arguments)},ct=m._memalign=function(){return(ct=m._memalign=m.asm.Cb).apply(null,arguments)},pt=m.__emscripten_allow_main_runtime_queued_calls=10512,ft=m.__emscripten_main_thread_futex=12148;function ht(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function bt(e){if(!(he>0)){if(k)return p(m),le(),void postMessage({cmd:"loaded"});de(),he>0||(m.setStatus?(m.setStatus("Running..."),setTimeout((function(){setTimeout((function(){m.setStatus("")}),1),n()}),1)):n())}function n(){jn||(jn=!0,m.calledRun=!0,q||(le(),ce(),p(m),m.onRuntimeInitialized&&m.onRuntimeInitialized(),pe()))}}function yt(e,n){if(!n||!W||0!==e){if(!n&&k)throw postMessage({cmd:"exitProcess",returnCode:e}),new ht(e);W||(Le.terminateAllThreads(),m.onExit&&m.onExit(e),q=!0),y(e,new ht(e))}}if(m.cwrap=X,m.PThread=Le,m.PThread=Le,m.wasmMemory=R,m.ExitStatus=ht,be=function e(){jn||bt(),jn||(be=e)},m.run=bt,m.preInit)for("function"==typeof m.preInit&&(m.preInit=[m.preInit]);m.preInit.length>0;)m.preInit.pop()();return k&&(W=!1,Le.initWorker()),bt(),e.ready});e.exports=o}));var yt=ht((function(e,n){var r,u=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){var n,u,s="undefined"!=typeof(e=e||{})?e:{};s.ready=new Promise((function(e,t){n=e,u=t}));var i,o={};for(i in s)s.hasOwnProperty(i)&&(o[i]=s[i]);var d=!1,l=!1,c=!1,p=!1;d="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p=!d&&!c&&!l;var f,m,h,b,y,_="";function v(e){return s.locateFile?s.locateFile(e,_):_+e}c?(_=l?t.dirname(_)+"/":__dirname+"/",f=function(e,n){return b||(b=a),y||(y=t),e=y.normalize(e),b.readFileSync(e,n?null:"utf8")},h=function(e){var n=f(e,!0);return n.buffer||(n=new Uint8Array(n)),A(n.buffer),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Ce))throw e})),process.on("unhandledRejection",te),s.inspect=function(){return"[Emscripten Module object]"}):p?("undefined"!=typeof read&&(f=function(e){return read(e)}),h=function(e){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(A("object"==typeof(n=read(e,"binary"))),n)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(d||l)&&(l?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),r&&(_=r),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",f=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},l&&(h=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),m=function(e,n,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?n(a.response):t()},a.onerror=t,a.send(null)});var g,w,k=s.print||console.log.bind(console),I=s.printErr||console.warn.bind(console);for(i in o)o.hasOwnProperty(i)&&(s[i]=o[i]);o=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit,s.wasmBinary&&(g=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&te("no native wasm support detected");var S=!1;function A(e,n){e||te("Assertion failed: "+n)}function M(e){var n=s["_"+e];return A(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function E(e,n,t,a,r){var u={string:function(e){var n=0;if(null!=e&&0!==e){var t=1+(e.length<<2);W(e,n=Oe(t),t)}return n},array:function(e){var n=Oe(e.length);return L(e,n),n}},s=M(e),i=[],o=0;if(a)for(var d=0;d<a.length;d++){var l=u[t[d]];l?(0===o&&(o=Fe()),i[d]=l(a[d])):i[d]=a[d]}var c=s.apply(null,i);return c=function(e){return"string"===n?R(e):"boolean"===n?Boolean(e):e}(c),0!==o&&Te(o),c}function x(e,n,t,a){var r=(t=t||[]).every((function(e){return"number"===e}));return"string"!==n&&r&&!a?M(e):function(){return E(e,n,t,arguments)}}var N,F,T,O,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,n,t){for(var a=n+t,r=n;e[r]&&!(r>=a);)++r;if(r-n>16&&e.subarray&&C)return C.decode(e.subarray(n,r));for(var u="";n<r;){var s=e[n++];if(128&s){var i=63&e[n++];if(192!=(224&s)){var o=63&e[n++];if((s=224==(240&s)?(15&s)<<12|i<<6|o:(7&s)<<18|i<<12|o<<6|63&e[n++])<65536)u+=String.fromCharCode(s);else{var d=s-65536;u+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else u+=String.fromCharCode((31&s)<<6|i)}else u+=String.fromCharCode(s)}return u}function R(e,n){return e?D(T,e,n):""}function P(e,n,t,a){if(!(a>0))return 0;for(var r=t,u=t+a-1,s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++s)),i<=127){if(t>=u)break;n[t++]=i}else if(i<=2047){if(t+1>=u)break;n[t++]=192|i>>6,n[t++]=128|63&i}else if(i<=65535){if(t+2>=u)break;n[t++]=224|i>>12,n[t++]=128|i>>6&63,n[t++]=128|63&i}else{if(t+3>=u)break;n[t++]=240|i>>18,n[t++]=128|i>>12&63,n[t++]=128|i>>6&63,n[t++]=128|63&i}}return n[t]=0,t-r}function W(e,n,t){return P(e,T,n,t)}function L(e,n){F.set(e,n)}function H(e,n){return e%n>0&&(e+=n-e%n),e}function B(e){N=e,s.HEAP8=F=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=O=new Int32Array(e),s.HEAPU8=T=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}s.INITIAL_MEMORY;var U,z=[],j=[],q=[],V=[];function G(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)Y(s.preRun.shift());pe(z)}function K(){pe(j)}function X(){pe(q)}function Q(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)Z(s.postRun.shift());pe(V)}function Y(e){z.unshift(e)}function Z(e){V.unshift(e)}j.push({func:function(){xe()}});var J=0,$=null;function ee(e){J++,s.monitorRunDependencies&&s.monitorRunDependencies(J)}function ne(e){if(J--,s.monitorRunDependencies&&s.monitorRunDependencies(J),0==J&&$){var n=$;$=null,n()}}function te(e){s.onAbort&&s.onAbort(e),I(e+=""),S=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw u(n),n}function ae(e,n){return String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n)}s.preloadedImages={},s.preloadedAudios={};var re="data:application/octet-stream;base64,";function ue(e){return ae(e,re)}var se="file://";function ie(e){return ae(e,se)}var oe="tfjs-backend-wasm.wasm";function de(e){try{if(e==oe&&g)return new Uint8Array(g);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){te(e)}}function le(){if(!g&&(d||l)){if("function"==typeof fetch&&!ie(oe))return fetch(oe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+oe+"'";return e.arrayBuffer()})).catch((function(){return de(oe)}));if(m)return new Promise((function(e,n){m(oe,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return de(oe)}))}function ce(){var e={a:Ee};function n(e,n){var t=e.exports;s.asm=t,B((w=s.asm.j).buffer),U=s.asm.r,ne()}function t(e){n(e.instance)}function a(n){return le().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){I("failed to asynchronously prepare wasm: "+e),te(e)}))}if(ee(),s.instantiateWasm)try{return s.instantiateWasm(e,n)}catch(e){return I("Module.instantiateWasm callback failed with error: "+e),!1}return(g||"function"!=typeof WebAssembly.instantiateStreaming||ue(oe)||ie(oe)||"function"!=typeof fetch?a(t):fetch(oe,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){return I("wasm streaming compile failed: "+e),I("falling back to ArrayBuffer instantiation"),a(t)}))}))).catch(u),{}}function pe(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var t=n.func;"number"==typeof t?void 0===n.arg?U.get(t)():U.get(t)(n.arg):t(void 0===n.arg?null:n.arg)}else n(s)}}function fe(){te()}function me(e,n,t){T.copyWithin(e,n,n+t)}function he(){return T.length}function be(e){try{return w.grow(e-N.byteLength+65535>>>16),B(w.buffer),1}catch(e){}}function ye(e){var n=he(),t=2147483648;if(e>t)return!1;for(var a=1;a<=4;a*=2){var r=n*(1+.2/a);if(r=Math.min(r,e+100663296),be(Math.min(t,H(Math.max(e,r),65536))))return!0}return!1}ue(oe)||(oe=v(oe));var _e={mappings:{},buffers:[null,[],[]],printChar:function(e,n){var t=_e.buffers[e];0===n||10===n?((1===e?k:I)(D(t,0)),t.length=0):t.push(n)},varargs:void 0,get:function(){return _e.varargs+=4,O[_e.varargs-4>>2]},getStr:function(e){return R(e)},get64:function(e,n){return e}};function ve(e){return 0}function ge(e,n,t,a,r){}function we(e,n,t,a){for(var r=0,u=0;u<t;u++){for(var s=O[n+8*u>>2],i=O[n+(8*u+4)>>2],o=0;o<i;o++)_e.printChar(e,T[s+o]);r+=i}return O[a>>2]=r,0}function ke(){return 6}function Ie(){return 28}function Se(e){return O[Ne()>>2]=e,e}function Ae(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Se(28),-1}var Me,Ee={a:fe,d:me,e:ye,f:ve,c:ge,b:we,h:ke,g:Ie,i:Ae},xe=(ce(),s.___wasm_call_ctors=function(){return(xe=s.___wasm_call_ctors=s.asm.k).apply(null,arguments)}),Ne=(s._init=function(){return(s._init=s.asm.l).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.m).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.n).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.o).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.p).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.q).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.s).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.t).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.u).apply(null,arguments)},s._All=function(){return(s._All=s.asm.v).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.w).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.x).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.y).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.z).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.A).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.B).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.C).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.D).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.E).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.F).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.G).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.H).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.I).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.J).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.K).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.L).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.M).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.N).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.O).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.P).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.Q).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.R).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.S).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.T).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.U).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.V).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.W).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.X).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Y).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.Z).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm._).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.$).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.aa).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.ba).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.ca).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.da).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.ea).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.fa).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.ga).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.ha).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.ia).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.ja).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.ka).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.la).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.ma).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.na).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.oa).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.pa).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.qa).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.ra).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.sa).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.ta).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.ua).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.va).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.wa).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.xa).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.ya).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.za).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.Aa).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.Ba).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Ca).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Da).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Ea).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Fa).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Ga).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.Ha).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.Ia).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.Ja).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Ka).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.La).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Ma).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Na).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Oa).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.Pa).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Qa).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Ra).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm.Sa).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.Ta).apply(null,arguments)},s._free=function(){return(s._free=s.asm.Ua).apply(null,arguments)},s.___errno_location=function(){return(Ne=s.___errno_location=s.asm.Va).apply(null,arguments)}),Fe=s.stackSave=function(){return(Fe=s.stackSave=s.asm.Wa).apply(null,arguments)},Te=s.stackRestore=function(){return(Te=s.stackRestore=s.asm.Xa).apply(null,arguments)},Oe=s.stackAlloc=function(){return(Oe=s.stackAlloc=s.asm.Ya).apply(null,arguments)};function Ce(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function De(e){function t(){Me||(Me=!0,s.calledRun=!0,S||(K(),X(),n(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),Q()))}J>0||(G(),J>0||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),t()}),1)):t()))}if(s.cwrap=x,$=function e(){Me||De(),Me||($=e)},s.run=De,s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return De(),e.ready});e.exports=u})),_t=function(e){function t(t){var a=e.call(this)||this;return a.wasm=t,a.dataIdNextNumber=1,a.wasm.tfjs.initWithThreadsCount(Et),xt=a.wasm.tfjs.getThreadsCount(),a.dataIdMap=new n.DataStorage(a,n.engine()),a}return function(e,n){function t(){this.constructor=e}dt(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(t,e),t.prototype.write=function(e,n,t){var a={id:this.dataIdNextNumber++};return this.move(a,e,n,t,1),a},t.prototype.numDataIds=function(){return this.dataIdMap.numDataIds()},t.prototype.time=function(e){return lt(this,void 0,void 0,(function(){var t;return ct(this,(function(a){return t=n.util.now(),e(),[2,{kernelMs:n.util.now()-t}]}))}))},t.prototype.move=function(e,t,a,r,u){var s=this.dataIdNextNumber++;if("string"!==r){var i=n.util.sizeFromShape(a),o=i*n.util.bytesPerElement(r),d=this.wasm._malloc(o);this.dataIdMap.set(e,{id:s,memoryOffset:d,shape:a,dtype:r,refCount:u}),this.wasm.tfjs.registerTensor(s,i,d),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),d)}else{var l=t;this.dataIdMap.set(e,{id:s,stringBytes:l,shape:a,dtype:r,memoryOffset:null,refCount:u})}},t.prototype.read=function(e){return lt(this,void 0,void 0,(function(){return ct(this,(function(n){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.dataIdMap.get(e),a=t.memoryOffset,r=t.dtype,u=t.shape,s=t.stringBytes;return"string"===r?s:function(e,n){switch(n){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype "+n)}}(this.wasm.HEAPU8.slice(a,a+n.util.sizeFromShape(u)*n.util.bytesPerElement(r)).buffer,r)},t.prototype.disposeData=function(e,n){if(void 0===n&&(n=!1),this.dataIdMap.has(e)){var t=this.dataIdMap.get(e);if(t.refCount--,!n&&t.refCount>0)return!1;this.wasm._free(t.memoryOffset),this.wasm.tfjs.disposeData(t.id),this.dataIdMap.delete(e)}return!0},t.prototype.refCount=function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0},t.prototype.incRef=function(e){var n=this.dataIdMap.get(e);null!=n&&n.refCount++},t.prototype.floatPrecision=function(){return 32},t.prototype.getMemoryOffset=function(e){return this.dataIdMap.get(e).memoryOffset},t.prototype.dispose=function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null},t.prototype.memory=function(){return{unreliable:!1}},t.prototype.makeOutput=function(e,t,a){var r;if(null==a)r=this.write(null,e,t);else{var u=this.dataIdNextNumber++;r={id:u},this.dataIdMap.set(r,{id:u,memoryOffset:a,shape:e,dtype:t,refCount:1});var s=n.util.sizeFromShape(e);this.wasm.tfjs.registerTensor(u,s,a)}return{dataId:r,shape:e,dtype:t}},t.prototype.typedArrayFromHeap=function(e){var t=e.shape,a=e.dtype,r=e.dataId,u=this.wasm.HEAPU8.buffer,s=this.dataIdMap.get(r).memoryOffset,i=n.util.sizeFromShape(t);switch(a){case"float32":return new Float32Array(u,s,i);case"int32":return new Int32Array(u,s,i);case"bool":return new Uint8Array(u,s,i);default:throw new Error("Unknown dtype "+a)}},t}(n.KernelBackend);function vt(e,n,t){if(null!=kt)return kt;var a="tfjs-backend-wasm.wasm";return e&&n?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=St&&null!=St[a]?St[a]:t+a}function gt(){return lt(this,void 0,void 0,(function(){var e,t,a;return ct(this,(function(r){switch(r.label){case 0:return[4,Promise.all([n.env().getAsync("WASM_HAS_SIMD_SUPPORT"),n.env().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")])];case 1:return e=r.sent(),t=e[0],a=e[1],[2,new Promise((function(e,r){var u={locateFile:function(e,n){if(e.endsWith(".worker.js")){var r=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(r)}return e.endsWith(".wasm")?vt(t,a,null!=It?It:n):n+e}};Mt&&(u.instantiateWasm=function(e){return function(t,a){return n.util.fetch(e,{credentials:"same-origin"}).then((function(n){n.ok||t.env.a("failed to load wasm binary file at '"+e+"'"),n.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){a(e.instance,e.module)}))}))})),{}}}(vt(t,a,null!=It?It:"")));var s,i=!1;u.onAbort=function(){if(!i&&!At){At=!0;r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})}},a&&t&&null==kt?(u.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+bt.toString()],{type:"text/javascript"}),s=bt(u)):s=yt(u),s.then((function(n){i=!0,At=!1;n.tfjs={init:n.cwrap("init",null,[]),initWithThreadsCount:n.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:n.cwrap("get_threads_count","number",[]),registerTensor:n.cwrap("register_tensor",null,["number","number","number"]),disposeData:n.cwrap("dispose_data",null,["number"]),dispose:n.cwrap("dispose",null,[])},e({wasm:n})}))}))]}}))}))}var wt=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],kt=null,It=null,St={},At=!1,Mt=!1;var Et=-1,xt=-1;n.registerBackend("wasm",(function(){return lt(undefined,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return[4,gt()];case 1:return e=n.sent().wasm,[2,new _t(e)]}}))}))}),2),e.BackendWasm=_t,e.getThreadsCount=function(){if(-1===xt)throw new Error("WASM backend not initialized.");return xt},e.setThreadsCount=function(e){Et=e},e.setWasmPath=function(e,t){if(void 0===t&&(t=!1),n.deprecationWarn("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),At)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");kt=e,Mt=t},e.setWasmPaths=function(e,n){if(void 0===n&&(n=!1),At)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)It=e;else{St=e;var t=wt.filter((function(e){return null==St[e]}));if(t.length>0)throw new Error("There were no entries found for the following binaries: "+t.join(",")+". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}Mt=n},e.version_wasm="3.11.0",Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=tf-backend-wasm.min.js.map
